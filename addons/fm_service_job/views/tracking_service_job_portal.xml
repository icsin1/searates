<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="shipment_tracking_link_template" inherit_id="freight_management.shipment_tracking_link_template">
        <xpath expr="//t[@t-if='master_shipment_id']" position="after">
            <t t-elif="service_job_id">
                <t t-foreach="service_job_id" t-as="job">
                    <span class="text-primary font-weight-bold">
                        <t t-esc="job.name" />
                    </span>
                </t>
            </t>
        </xpath>
    </template>
    <template id="service_job_tracking_portal_template"
              inherit_id="freight_management.shipment_tracking_portal_template">
        <xpath expr="//t[@t-if='(shipment_id or master_shipment_id) and events']" position="attributes">
            <attribute name="t-if">(service_job_id or shipment_id or master_shipment_id) and events</attribute>
        </xpath>
        <xpath expr='//t[@t-elif="tracking_number and (not shipment_id or not events or not master_shipment_id)"]' position="attributes">
            <attribute name="t-elif">tracking_number and (not service_job_id or not shipment_id or not events or not master_shipment_id)</attribute>
        </xpath>
        <xpath expr="//div[@id='tracking_details']//div[@id='shipping_details']" position="inside">
            <t t-foreach="service_job_id" t-as="job">
                <div class="col-md-12">
                    <p class="large-screen-text-font-size" style="margin-bottom: 0px;">
                        <span><b>Service Job Type:</b></span>
                        <span class="large-screen-sub-text-font-size">
                            <t t-esc="job.service_job_type_id.name" />
                        </span>
                    </p>
                </div>
            </t>
        </xpath>
        <xpath expr="//div[@id='tracking_details']//div[@id='carriage_details']" position="inside">
            <t t-foreach="service_job_id" t-as="job">
                <div class="col-md-6">
                    <p class="large-screen-text-font-size" style="margin-bottom: 0px;">
                        <span><b>ETA:</b></span>
                        <span class="large-screen-sub-text-font-size"
                              t-field="job.eta_time" t-options='{"widget": "date"}'>
                        </span>
                    </p>
                </div>
                <div class="col-md-6">
                    <p class="large-screen-text-font-size" style="margin-bottom: 0px;">
                        <span><b>ETD:</b></span>
                        <span class="large-screen-sub-text-font-size" t-field="job.etd_time" t-options='{"widget": "date"}'>
                        </span>
                    </p>
                </div>
            </t>
        </xpath>
        <xpath expr="//div[@id='tracking_details']//div[@id='status_details']" position="inside">
            <t t-foreach="service_job_id" t-as="job">
                <div class="col-md-6">
                    <p class="mb-0">
                        <b>Status:</b>
                        <span class="font-weight-bold">
                            <span t-field="job.state" />
                        </span>
                    </p>
                </div>
            </t>
        </xpath>
    </template>
</odoo>
