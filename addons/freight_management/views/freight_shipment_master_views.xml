<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="freight_shipment_view_houses_action" model="ir.actions.act_window">
        <field name="name">House Shipments</field>
        <field name="res_model">freight.house.shipment</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('parent_id', '=', active_id)]</field>
        <field name="context">{'control_panel_class': 'house', 'create': False, 'delete': False}</field>
    </record>

    <record id="freight_master_shipment_view_form" model="ir.ui.view">
        <field name="name">freight.master.shipment.view.form</field>
        <field name="model">freight.master.shipment</field>
        <field name="arch" type="xml">
            <form string="Shipment" js_class="colered_control_panel">
                <header>
                    <field name="state" widget="statusbar" attrs="{'invisible': [('mode_type', 'in', ['air', 'land'])]}"/>
                    <field name="air_state" widget="statusbar" statusbar_visible="draft,cancelled,completed" attrs="{'invisible': [('mode_type', '!=', 'air')]}"/>
                    <button string="Attach Houses" name="action_attach_house_shipments" type="object" class="oe_highlight" attrs="{'invisible': ['|',('is_direct_shipment', '=', True), ('state', '=', 'cancelled')]}"/>
                    <button string="Change Status" name="action_change_status" type="object" class="oe_highlight"/>
                </header>
                <sheet>
                    <field name="cargo_is_package_group" invisible="1" context="{'force_change': True}"/>
                    <field name="packaging_mode" invisible="1"/>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_open_freight_house_shipment" context="{'detach': True}" type="object" class="oe_stat_button" icon="fa-home"
                                groups="freight_base.group_manage_pricing,freight_base.group_manage_documents,freight_base.group_operation_associate,base.group_system">
                            <field string="Houses" name="house_shipment_count" widget="statinfo"/>
                        </button>
                        <button name="action_shipment_documents" type="object" class="oe_stat_button" icon="fa-file"
                                groups="freight_base.group_manage_pricing,freight_base.group_manage_documents,freight_base.group_operation_associate,base.group_system">
                            <field string="Documents" name="document_count" widget="statinfo"/>
                        </button>
                    </div>
                    <div class="row">
                        <div class="col pr-0">
                            <label for="name" string="Master Shipment Number" />
                            <div class="oe_title">
                                <h1>
                                    <field name="name" placeholder="Master Shipment Number"/>
                                </h1>
                            </div>
                        </div>
                        <div class="col pl-0">
                            <label for="carrier_booking_reference_number" string="MBL" attrs="{'invisible': [('mode_type', 'in', ['air', 'land'])]}"/>
                            <label for="carrier_booking_reference_number" string="MAWB" attrs="{'invisible': [('mode_type', '!=', 'air')]}"/>
                            <div class="oe_title">
                                <h1 class="pt-0 mt-0">
                                    <field name="carrier_booking_reference_number" nolabel="1" context="{'default_transport_mode_id': transport_mode_id}" attrs="{'readonly': [('mode_type', '=', 'air')]}"/>
                                </h1>
                            </div>
                        </div>
                    </div>
                    <group>
                        <group>
                            <field name="house_shipment_ids" widget="many2many_tags" invisible="1"/>
                            <field name="id" invisible="1"/>
                            <field name="is_direct_shipment" widget="boolean_toggle" invisible="1"/>
                            <field name="is_courier_shipment" widget="boolean_toggle" attrs="{'readonly': ['|', ('id', '>', 0),('house_shipment_ids','!=' , False)]}"/>
                            <field name="company_id" options="{'no_create': True, 'no_open': True}" groups="base.group_multi_company"/>
                            <field name="consolidation_type_id" options="{'no_create': True, 'no_open': True}"/>
                            <field name="currency_id" groups="base.group_no_one"/>
                        </group>
                        <group>
                            <field name="shipment_date" />
                            <field name="tag_ids" widget="many2many_tags"/>
                        </group>
                    </group>
                    <group string="General Details">
                        <group>
                            <field name="shipment_type_domain" invisible="1" />
                            <field name="shipment_type_id" domain="shipment_type_domain" options="{'no_create': True, 'no_open': True}"  attrs="{'readonly': ['&amp;', ('id', '>', 0),('shipment_type_id', '>', 0)], 'required': 1}" force_save="1"/>
                            <field name="cargo_type_domain" invisible="1" />
                            <field name="cargo_type_id"  domain="cargo_type_domain" options="{'no_create': True, 'no_open': True}"  attrs="{'readonly': ['&amp;', ('id', '>', 0),('cargo_type_id', '>', 0)], 'required': 1}" force_save="1"/>
                        </group>
                        <group>
                            <field name="transport_mode_id" options="{'no_create': True, 'no_open': True}" attrs="{'readonly': ['&amp;', ('id', '>', 0),('transport_mode_id', '>', 0)], 'required': 1}" force_save="1"/>
                            <field name="service_mode_id" options="{'no_create': True, 'no_open': True}" />
                            <field name="mode_type" invisible="1"/>
                            <field name="user_id" options="{'no_create': True, 'no_open': True}"/>
                        </group>
                    </group>
                    <separator string="Declared Weight &amp; Volume"/>
                    <label for="auto_update_weight_volume" class="font-weight-bold"/>
                    <field name="auto_update_weight_volume" widget="boolean_toggle" context="{'force_change': True}" nolable="1"/>
                    <group>
                        <group>
                            <label for="pack_unit" string="Packs"/>
                            <div class="o_row">
                                <field name="pack_unit" force_save="1" attrs="{'readonly':[('auto_update_weight_volume','=',True)]}"/>
                                <field name="pack_unit_uom_id" force_save="1" options="{'no_open': True, 'no_create': True}"  attrs="{'readonly':[('auto_update_weight_volume','=',True)]}"/>
                            </div>
                            <label for="gross_weight_unit"/>
                            <div class="o_row">
                                <field name="gross_weight_unit" force_save="1" attrs="{'readonly':[('auto_update_weight_volume','=',True)]}"/>
                                <field name="gross_weight_unit_uom_id" options="{'no_open': True, 'no_create': True}" force_save="1"
                                    attrs="{'readonly':[('auto_update_weight_volume','=',True)]}"/>
                            </div>
                            <label for="weight_volume_unit"/>
                            <div class="o_row">
                                <field name="weight_volume_unit" attrs="{'readonly':[('auto_update_weight_volume','=',True)]}"/>
                                <field name="weight_volume_unit_uom_id" options="{'no_open': True, 'no_create': True}" force_save="1"
                                    attrs="{'readonly':[('auto_update_weight_volume','=',True)]}"/>
                            </div>
                        </group>
                        <group>
                            <label for="net_weight_unit"/>
                            <div class="o_row">
                                <field name="net_weight_unit" attrs="{'readonly':[('auto_update_weight_volume','=',True)]}" force_save="1"/>
                                <field name="net_weight_unit_uom_id" class="ml-1"
                                       options="{'no_open': True, 'no_create': True}"
                                       attrs="{'readonly':[('auto_update_weight_volume','=',True)]}" force_save="1"/>
                            </div>
                            <label for="volume_unit"/>
                            <div class="o_row">
                                <field name="volume_unit" attrs="{'readonly':[('auto_update_weight_volume','=',True)]}" force_save="1"/>
                                <field name="volume_unit_uom_id" class="ml-1" options="{'no_open': True, 'no_create': True}"
                                    attrs="{'readonly':[('auto_update_weight_volume','=',True)]}" force_save="1"/>
                            </div>
                            <label for="chargeable_kg"/>
                            <div class="d-flex oe_inline">
                                <field name="chargeable_kg" force_save="1" readonly="1"/>
                                <field name="chargeable_uom_id" class="ml-2" options="{'no_open': True, 'no_create': True}" readonly="1" force_save="1"/>
                            </div>
                        </group>
                    </group>
                    <notebook>
                        <page name="carrier_details" string="Carriage">
                            <group string="Vessel Info" name="vessel_info" attrs="{'invisible': [('mode_type', '!=', 'sea')]}">
                                <group>
                                    <div class="o_td_label">
                                        <label for="voyage_number" string="Voyage No"/>
                                    </div>
                                    <field name="voyage_number" nolabel="1"/>
                                    <field name="vessel_id" options="{'no_create': 1}"/>
                                </group>
                                <group>
                                    <div class="o_td_label">
                                        <label for="shipping_line_id" string="Shipping Line"/>
                                    </div>
                                    <field name="shipping_line_id" nolabel="1" domain="[('mode_type', '=', mode_type)]"
                                           context="{'default_transport_mode_id': transport_mode_id}"/>
                                </group>
                            </group>
                            <group string="Airline Info" name="airline_info" attrs="{'invisible': [('mode_type', '!=', 'air')]}">
                                <group>
                                    <div class="o_td_label">
                                        <label for="voyage_number" string="Flight No"/>
                                    </div>
                                    <field name="voyage_number" nolabel="1"/>
                                    <field name="aircraft_type" string="Aircraft Type" widget="selection"/>
                                </group>
                                <group>
                                    <div class="o_td_label">
                                        <label for="shipping_line_id" string="Airlines"/>
                                    </div>
                                    <field name="shipping_line_id" nolabel="1" domain="[('mode_type', '=', mode_type)]"
                                           context="{'default_transport_mode_id': transport_mode_id}"/>
                                </group>
                            </group>
                            <group string="Other Related Information" attrs="{'invisible': [('mode_type', 'not in', ['air', 'land'])]}">
                                <group>
                                    <field name="handling_info" ttrs="{'invisible': [('mode_type', 'not in', ['air', 'land'])]}"/>
                                    <field name="iata_code" attrs="{'invisible': [('mode_type', '!=', 'air')]}"/>
                                    <field name="declared_value_carrier" attrs="{'invisible': [('mode_type', '!=', 'air')]}"/>
                                    <field name="declared_value_customer" attrs="{'invisible': [('mode_type', '!=', 'air')]}"/>
                                    <div/>
                                </group>
                                <group>
                                    <field name="accounting_info" attrs="{'invisible': [('mode_type', 'not in', ['air', 'land'])]}"/>
                                    <field name="iata_rate" attrs="{'invisible': [('mode_type', '!=', 'air')]}"/>
                                    <field name="iata_rate_currency_id" invisible="1"/>
                                    <field name="commodity" attrs="{'invisible': [('mode_type', '!=', 'air')]}"/>
                                    <div/>
                                </group>
                            </group>
                            <group>
                                <group string="Origin" name="origin_details" attrs="{'invisible': [('mode_type', '=', 'land')]}">
                                    <field name="master_check" invisible="1"/>
                                    <field name="origin_un_location_id" string="Origin" attrs="{'required' :[('mode_type', '!=', 'land'),('master_check', '!=', True)]}"/>
                                    <field name="origin_country_id" invisible="1"/>
                                    <div class="o_td_label">
                                        <label for="origin_port_un_location_id" string="Origin Port" attrs="{'invisible': [('mode_type', '=', 'air')]}"/>
                                        <label for="origin_port_un_location_id" string="Origin Airport" attrs="{'invisible': [('mode_type', '!=', 'air')]}"/>
                                    </div>
                                    <field name="origin_port_un_location_id" nolabel="1" attrs="{'required':1}" domain="[('transport_mode_id','=',transport_mode_id)]" context="{'default_country_id': origin_country_id, 'default_transport_mode_id': transport_mode_id}"/>
                                    <field name="etd_time" />
                                    <field name="atd_time" />
                                </group>
                                <group string="Destination" name="destination_details" attrs="{'invisible': [('mode_type', '=', 'land')]}">
                                    <field name="destination_un_location_id" string="Destination" attrs="{'required' :[('mode_type', '!=', 'land'),('master_check', '!=', True)]}"/>
                                    <field name="destination_country_id" invisible="1"/>
                                    <div class="o_td_label">
                                        <label for="destination_port_un_location_id" string="Destination Port" attrs="{'invisible': [('mode_type', '=', 'air')]}"/>
                                        <label for="destination_port_un_location_id" string="Destination Airport" attrs="{'invisible': [('mode_type', '!=', 'air')]}"/>
                                    </div>
                                    <field name="destination_port_un_location_id" nolabel="1" attrs="{'required':1}" domain="[('transport_mode_id','=',transport_mode_id)]" context="{'default_country_id': destination_country_id, 'default_transport_mode_id': transport_mode_id}"/>
                                    <field name="eta_time" />
                                    <field name="ata_time" />
                                </group>
                            </group>
                        </page>
                       <page name="carrier_booking_details" string="Ext. Carrier Bookings">
                            <group string="Booking Confirmation">
                                <group>
                                    <field name="carrier_booking_carrier_number"/>
                                    <field name="carrier_agent_id" domain="[('freight_carrier_id', '=', shipping_line_id)]"
                                           context="{'default_category_ids': [%(freight_base.org_type_carrier_agent)d], 'default_freight_carrier_id': shipping_line_id}"/>
                                    <field name="carrier_forwarder_reference_number" string="Forwarder Ref. Number"/>
                                    <field name="ams_number"/>
                                </group>
                                <group>
                                    <div class="o_td_label">
                                        <label for="carrier_vessel_cut_off_datetime" string="Vessel Cut-Off" attrs="{'invisible': [('mode_type', '=', 'air')]}"/>
                                        <label for="carrier_vessel_cut_off_datetime" string="Onboarding Cut-Off" attrs="{'invisible': [('mode_type', '!=', 'air')]}"/>
                                    </div>
                                    <field name="carrier_vessel_cut_off_datetime" nolabel="1"/>
                                    <field name="carrier_warehouse_cut_off_datetime" string="Warehouse Cut-Off"/>
                                    <field name="carrier_vgm_cut_off_datetime" string="VGM Cut-Off" attrs="{'invisible': [('mode_type', '=', 'air')]}"/>
                                    <field name="total_teu" attrs="{'invisible': [('mode_type', '=', 'air')]}"/>
                                </group>
                            </group>
                            <group string="Containers" attrs="{'invisible': [('mode_type', '=', 'air')]}">
                                <h3 colspan="4" class="text-break text-danger" attrs="{'invisible': ['|', ('state', '=', 'cancelled'), ('upload_file_message', '=', False)]}">
                                    <field name="upload_file_message" readonly="1" force_save="1"/>
                                </h3>
                                <group class="mb-2" attrs="{'invisible': [('state', 'not in', ['draft', 'booked'])]}">
                                    <div>
                                        <button name="action_download_container_numbers_template" type="object"
                                                class="oe_highlight btn-icon mr-2 fa fa-download"
                                                title="Download Container Details"/>
                                        <widget id="attach_document" name="attach_document"
                                                string="Upload Containers"
                                                action="action_upload_container_list"
                                                highlight="1"/>
                                        <button name="action_fetch_containers_from_house" type="object"
                                                string="Fetch From House Shipment" class="oe_highlight ml-2"
                                                attrs="{'invisible': ['|', ('house_shipment_count', '=', 0),
                                                ('cargo_is_package_group', '=', True)]}" />
                                    </div>
                                </group>
                                <group colspan="2">
                                    <field nolabel="1" name="carrier_booking_container_ids" context="{'force_unlink_container_only': True}"/>
                                </group>
                            </group>
                            <group string="Documents">
                                <field nolabel="1" name="carrier_booking_document_ids">
                                    <tree editable="bottom">
                                        <field name="name" />
                                        <field name="file_name" invisible="True"/>
                                        <field name="document_file" filename="file_name" widget="binary"/>
                                    </tree>
                                </field>
                            </group>
                        </page>
                        <page name="parties" string="Parties">
                            <field name="shipment_partner_ids">
                                <tree editable="bottom">
                                    <field name="party_type_domain" invisible="1"/>
                                    <field name="partner_type_id" options="{'no_create': True, 'no_open': True}" domain="party_type_domain"/>
                                    <field name="partner_id" domain="[('category_ids', 'in', partner_type_id)]" context="{'force_change': True, 'default_partner_type_id': partner_type_id, 'default_category_ids': [(4, partner_type_id)]}"  />
                                    <field name="party_address_id" optional="hide" context="{'default_parent_id': partner_id, 'default_partner_type_id': partner_type_id, 'default_category_ids': [(4, partner_type_id)]}"/>
                                    <field name="party_address"/>
                                </tree>
                            </field>
                        </page>
                        <page name="package_details" string="Packages">
                            <div class="text-danger" attrs="{'invisible': [('transport_mode_id', '!=', False), ('shipment_type_id', '!=', False), ('cargo_type_id', '!=', False)]}">
                                <b>You have to set Transport Mode, Shipment Type and Cargo Type at Shipment, to enable Packages entry!</b>
                            </div>
                            <button type="object" name="action_fetch_packages_from_house_shipment" string="Fetch from House Shipment" class="btn btn-primary btn-sm mb-2 mr-2"
                                attrs="{'invisible': ['|',('house_shipment_ids', '=', []),('state', 'in', ['completed', 'cancelled'])]}" />
                            <button type="object" name="action_remove_all_packages" string="Delete All Packages" class="btn btn-danger btn-sm mb-2 mx-2"
                                confirm="Are you sure you want to remove all Packages?"
                                attrs="{'invisible': ['|', '&amp;', ('package_ids', '=', []), ('container_ids', '=', []), '|', '|', '|', ('transport_mode_id', '=', False), ('shipment_type_id', '=', False), ('cargo_type_id', '=', False), ('state', 'in', ['completed', 'cancelled'])]}"/>
                            <button type="object" name="action_assign_container" string="Assign Container" class="btn btn-primary btn-sm mb-2 mr-2"
                                attrs="{'invisible': ['|', '|', '|', ('packaging_mode', '!=', 'container'), ('cargo_type_id', '=', False), ('container_ids', '=', []), ('state', 'in', ['completed', 'cancelled'])]}"/>
                            <field nolabel="1" name="package_ids" context="{'default_package_mode': packaging_mode, 'force_change': True}" string="Package"
                                attrs="{'invisible': ['|', '|', '|', ('packaging_mode', '!=', 'package'), ('transport_mode_id', '=', False), ('shipment_type_id', '=', False), ('cargo_type_id', '=', False)]}">
                                <tree default_order="house_shipment_id" create="0">
                                    <field name="house_shipment_id"/>
                                    <field name="package_type_id"/>
                                    <field name="package_mode" invisible="1"/>
                                    <field name="container_number" attrs="{'column_invisible': [('parent.mode_type', '=', 'air')]}"/>
                                    <field name="stuffing_date" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="stuffing_cfs_id" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="stuffing_confirmed" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="destuffing_date" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="destuffing_cfs_id" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="destuffing_confirmed" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="quantity" string="Pack Count"/>
                                    <field name="seal_number" attrs="{'column_invisible': [('parent.mode_type', '=', 'air')]}"/>
                                    <field name="marksnnums" optional="hide"/>
                                    <field name="length" optional="hide"/>
                                    <field name="width" optional="hide"/>
                                    <field name="height" optional="hide"/>
                                    <field name="dimension_uom_id" optional="hide"/>
                                    <field name="total_master_weight_unit" optional="hide"/>
                                    <field name="container_master_weight_uom_id" optional="hide"/>
                                    <field name="total_master_volume_unit" optional="hide"/>
                                    <field name="container_master_volume_uom_id" optional="hide"/>
                                    <field name="total_master_volumetric_weight" optional="hide"/>
                                    <field name="container_master_volumetric_weight_uom_id" optional="hide"/>
                                    <field name="is_hazardous" optional="hide"/>
                                    <field name="haz_class_id" optional="hide"/>
                                    <field name="un_code" optional="hide"/>
                                    <field name="description" optional="hide"/>
                                    <field name="is_refrigerated" optional="hide"/>
                                    <field name="container_temperature" optional="hide"/>
                                    <field name="container_temperature_uom_id" optional="hide"/>
                                    <field name="max_temperature" optional="hide"/>
                                    <field name="max_temperature_uom_id" optional="hide"/>
                                    <field name="commodity_types" optional="hide"/>
                                    <field name="hbl_description" string="HBL/HAWB Description" optional="hide"/>
                                </tree>
                            </field>
                            <field nolabel="1" name="container_ids" context="{'default_package_mode': packaging_mode, 'force_change': True}" string="Container"
                                attrs="{'invisible': ['|', '|', '|', ('packaging_mode', '!=', 'container'), ('transport_mode_id', '=', False), ('shipment_type_id', '=', False), ('cargo_type_id', '=', False)]}">
                                <tree default_order="house_shipment_id" create="0">
                                    <field name="house_shipment_id"/>
                                    <field name="container_type_id"/>
                                    <field name="package_mode" invisible="1"/>
                                    <field name="container_number"/>
                                    <field name="stuffing_date" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="stuffing_cfs_id" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="stuffing_confirmed" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="destuffing_date" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="destuffing_cfs_id" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="destuffing_confirmed" attrs="{'column_invisible': [('parent.mode_type', '!=', 'sea')]}" optional="show"/>
                                    <field name="pack_count"/>
                                    <field name="quantity" string="Container Count"/>
                                    <field name="no_of_teu" optional="hide"/>
                                    <field name="seal_number" attrs="{'column_invisible': [('parent.mode_type', '=', 'air')]}"/>
                                    <field name="total_master_weight_unit" optional="hide"/>
                                    <field name="container_master_weight_uom_id" optional="hide"/>
                                    <field name="total_master_volume_unit" optional="hide"/>
                                    <field name="container_master_volume_uom_id" optional="hide"/>
                                    <field name="total_master_volumetric_weight" optional="hide"/>
                                    <field name="container_master_volumetric_weight_uom_id" optional="hide"/>
                                    <field name="is_hazardous" optional="hide"/>
                                    <field name="haz_class_id" optional="hide"/>
                                    <field name="un_code" optional="hide"/>
                                    <field name="description" optional="hide"/>
                                    <field name="is_refrigerated" optional="hide"/>
                                    <field name="container_temperature" optional="hide"/>
                                    <field name="container_temperature_uom_id" optional="hide"/>
                                    <field name="max_temperature" optional="hide"/>
                                    <field name="max_temperature_uom_id" optional="hide"/>
                                    <field name="container_package_types" optional="hide"/>
                                    <field name="is_part_bl" optional="hide"/>
                                </tree>
                            </field>
                        </page>
                        <page name="routing" string="Routing" attrs="{'invisible': [('is_direct_shipment', '=', True)]}">
                            <field name="route_ids" context="{'default_cost_currency_id': currency_id, 'default_sell_currency_id': currency_id, 'default_company_id': company_id, 'default_currency_id': currency_id, 'set_default_params': True}"/>
                        </page>
                        <page name="milestones" string="Milestones Tracking">
                            <field name="event_ids" />
                        </page>
                        <page string="T &amp; C" name="terms_and_conditions">
                            <field name="terms_ids" context="{'default_shipment_id': active_id}"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="freight_master_shipment_info_view_form" model="ir.ui.view">
        <field name="name">freight.master.shipment.info.view.form</field>
        <field name="model">freight.master.shipment</field>
        <field name="priority">100</field>
        <field name="arch" type="xml">
            <form string="Shipment">
                <sheet>
                    <field name="is_courier_shipment" invisible="1"/>
                    <field name="state" invisible="1"/>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" special="cancel" icon="fa-list">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_text">Shipment Type</span>
                                <span class="o_stat_value">
                                    <field name="shipment_type_id" options="{'no_open': True}"/>
                                </span>
                            </div>
                        </button>
                        <button class="oe_stat_button" special="cancel" icon="fa-clock-o">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_text">Shipment Date</span>
                                <span class="o_stat_value">
                                    <field name="shipment_date"/>
                                </span>
                            </div>
                        </button>
                        <button class="oe_stat_button" special="cancel" icon="fa-area-chart">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_text">Transport Mode</span>
                                <span class="o_stat_value">
                                    <field name="transport_mode_id" options="{'no_open': True}"/>
                                </span>
                            </div>
                        </button>
                        <button class="oe_stat_button" special="cancel" icon="fa-users">
                            <div class="o_form_field o_stat_info">
                                <span class="o_stat_text">Cargo Type</span>
                                <span class="o_stat_value">
                                    <field name="cargo_type_domain" invisible="1" />
                                    <field name="cargo_type_id"  domain="cargo_type_domain" options="{'no_open': True}"/>
                                </span>
                            </div>
                        </button>
                    </div>
                    <group string="Declared Weight &amp; Volume">
                        <label for="pack_unit" string="Packs"/>
                        <div class="d-flex oe_inline">
                            <field name="pack_unit" force_save="1"/>&amp;nbsp;
                            <field name="pack_unit_uom_id" options="{'no_open': True, 'no_create': True}" force_save="1"/>
                        </div>
                        <label for="gross_weight_unit"/>
                        <div class="d-flex oe_inline">
                            <field name="gross_weight_unit" force_save="1"/>&amp;nbsp;
                            <field name="gross_weight_unit_uom_id" options="{'no_open': True, 'no_create': True}" force_save="1"/>
                        </div>
                        <label for="weight_volume_unit"/>
                        <div class="o_row">
                            <field name="weight_volume_unit"/>
                            <field name="weight_volume_unit_uom_id" options="{'no_open': True, 'no_create': True}" force_save="1"/>
                        </div>
                        <label for="net_weight_unit"/>
                        <div class="d-flex oe_inline">
                            <field name="net_weight_unit" force_save="1"/>&amp;nbsp;
                            <field name="net_weight_unit_uom_id" options="{'no_open': True, 'no_create': True}" force_save="1"/>
                        </div>
                        <label for="volume_unit"/>
                        <div class="d-flex oe_inline">
                            <field name="volume_unit" force_save="1"/>&amp;nbsp;
                            <field name="volume_unit_uom_id" options="{'no_open': True, 'no_create': True}" force_save="1"/>
                        </div>
                        <label for="chargeable_kg"/>
                        <div class="d-flex oe_inline">
                            <field name="chargeable_kg" force_save="1" readonly="1"/>
                            <field name="chargeable_uom_id" class="ml-2" options="{'no_open': True, 'no_create': True}" readonly="1" force_save="1"/>
                        </div>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="freight_master_shipment_view_kanban" model="ir.ui.view">
        <field name="name">freight.master.shipment.view.kanban</field>
        <field name="model">freight.master.shipment</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_mobile" records_draggable="0" default_group_by="state" quick_create="false">
                <field name="name"/>
                <field name="transport_mode_id"/>
                <field name="origin_un_location_id"/>
                <field name="destination_un_location_id"/>
                <field name="currency_id"/>
                <field name="tag_ids"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_card oe_kanban_global_click">
                            <div class="row">
                                <div class="col-8">
                                    <h4 class="mb-0 pb-0 text-primary"><t t-esc="record.name.value"/></h4>
                                </div>
                                <div id="title" class="col-4 text-info h4 text-right" title="Houses Attached">
                                    <span class="fa fa-home"/> <field name="house_shipment_count"/>
                                </div>
                                <t t-if="record.carrier_booking_reference_number.raw_value">
                                    <div class="col-12">
                                        <strong>MBL:</strong> <field name="carrier_booking_reference_number" class="font-weight-bold"/>
                                    </div>
                                </t>
                            </div>
                            <div class="row mb4">
                                <div class="col-12">
                                    <field name="tag_ids" widget="many2many_tags"/>
                                </div>
                            </div>
                            <t t-if="record.origin_un_location_id.value and record.destination_un_location_id.value">
                                <t t-set="transport_mode" t-value="record.transport_mode_id.value"/>
                                <h3 class="o_kanban_record_subtitle">
                                    <t t-if="transport_mode == '[SEA] Sea Freight'"><i class="fa fa-ship" aria-label="ship"></i></t>
                                    <t t-if="transport_mode == '[AIR] Air Freight'"><i class="fa fa-plane" aria-label="plane"></i></t>
                                    <t t-if="transport_mode == '[ROA] Road Freight'"><i class="fa fa-road" aria-label="road"></i></t>
                                    <field name="origin_un_location_id"/> <span class="fa fa-arrow-right" aria-label="circle"/> <field name="destination_un_location_id"/>
                                </h3>
                            </t>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="freight_master_shipment_view_search" model="ir.ui.view">
        <field name="name">freight.master.shipment.view.search</field>
        <field name="model">freight.master.shipment</field>
        <field name="arch" type="xml">
            <search string="Shipment">
                <field name="name" string="Search Shipment" filter_domain="['|', '|', ('carrier_booking_reference_number', 'ilike', self), ('container_number_ids.container_number', 'ilike', self), ('tag_ids.name', 'ilike', self)]"/>
                <field name="name" />
                <field name="carrier_booking_reference_number" string="MBL Number"/>
                <field name="house_shipment_ids"/>
                <field name="tag_ids"/>
                <field name="transport_mode_id"/>
                <field name="origin_un_location_id"/>
                <field name="destination_un_location_id"/>
                <field name="name" string="Container Numbers" filter_domain="['|', ('container_ids.container_number', 'ilike', self), ('package_ids.container_number', 'ilike', self)]"/>
                <separator/>
                <filter string="My Shipments" name="filter_my_shipments" domain="[('user_id', '=', uid)]" />
                <separator/>
                <filter string="Open Master" name="open_master" invisible="context.get('show_house_shipment', False)" domain="[('state', '!=', 'cancelled')]" />
                <separator/>
                <filter name="current_month" string="Current Month" domain="[
                    ('shipment_date', '&gt;=', (context_today()).strftime('%Y-%m-01')),
                    ('shipment_date', '&lt;', (context_today() + relativedelta(months=1)).strftime('%Y-%m-01'))]"/>
                <filter name="shipment_date" string="Shipment Date" date="shipment_date"/>
                <filter name="create_date" string="Create Date" date="create_date"/>
                <filter name="ata_time" string="ATA" date="ata_time"/>
                <filter name="atd_time" string="ATD" date="atd_time"/>
                <filter name="eta_time" string="ETA" date="eta_time"/>
                <filter name="etd_time" string="ETD" date="etd_time"/>
                <filter name="group_by_transport_mode" string="Transport Mode" context="{'group_by': 'transport_mode_id'}" />
                <filter name="group_by_shipment_type" string="Shipment Type" context="{'group_by': 'shipment_type_id'}" />
                <filter name="group_by_cargo_type" string="Cargo Type" context="{'group_by': 'cargo_type_id'}" />
                <filter name="group_by_state" string="State" context="{'group_by': 'state'}" />
                <separator/>
                <filter name="group_by_shipment_date" string="Shipment Date" context="{'group_by': 'shipment_date'}"/>
                <filter name="group_by_create_date" string="Create Date" context="{'group_by': 'create_date'}"/>
                <filter name="group_by_ata_time" string="ATA" context="{'group_by': 'ata_time'}"/>
                <filter name="group_by_atd_time" string="ATD" context="{'group_by': 'atd_time'}"/>
                <filter name="group_by_eta_time" string="ETA" context="{'group_by': 'eta_time'}"/>
                <filter name="group_by_etd_time" string="ETD" context="{'group_by': 'etd_time'}"/>
            </search>
        </field>
    </record>

    <record id="freight_master_shipment_view_tree" model="ir.ui.view">
        <field name="name">freight.master.shipment.view.tree</field>
        <field name="model">freight.master.shipment</field>
        <field name="arch" type="xml">
            <tree string="Shipment">
                <field name="name"/>
                <field name="transport_mode_id" optional="hide"/>
                <field name="shipment_type_id" optional="hide"/>
                <field name="cargo_type_domain" invisible="1" />
                <field name="cargo_type_id" optional="hide"  domain="cargo_type_domain"/>
                <field name="currency_id"/>
                <field name="list_containers_count" widget="do_action" options="{'action': 'freight_management.freight_shipment_master_package_do_action_view_action'}"/>
                <field name="state" string="State"/>
                <field name="sales_agent_id" optional="hide"/>
                <field name="tag_ids" widget="many2many_tags" optional="hide"/>
                <field name="user_id" optional="hide"/>
                <field name="pack_unit" optional="hide"/>
                <field name="pack_unit_uom_id" optional="hide"/>
                <field name="gross_weight_unit" optional="hide"/>
                <field name="gross_weight_unit_uom_id" optional="hide"/>
                <field name="weight_volume_unit" optional="hide"/>
                <field name="weight_volume_unit_uom_id" optional="hide"/>
                <field name="net_weight_unit" optional="hide"/>
                <field name="net_weight_unit_uom_id" optional="hide"/>
                <field name="volume_unit" optional="hide"/>
                <field name="volume_unit_uom_id" optional="hide"/>
                <field name="chargeable_kg" optional="hide"/>
                <field name="chargeable_uom_id" optional="hide"/>
                <field name="voyage_number" optional="hide"/>
                <field name="vessel_id" optional="hide"/>
                <field name="shipping_line_id" optional="hide"/>
                <field name="origin_un_location_id" optional="hide"/>
                <field name="origin_port_un_location_id" optional="hide"/>
                <field name="destination_un_location_id" optional="hide"/>
                <field name="destination_port_un_location_id" optional="hide"/>
                <field name="etd_time" optional="hide"/>
                <field name="eta_time" optional="hide"/>
                <field name="atd_time" optional="hide"/>
                <field name="ata_time" optional="hide"/>
                <field name="carrier_booking_reference_number" optional="hide"/>
                <field name="carrier_booking_carrier_number" optional="hide"/>
                <field name="carrier_forwarder_reference_number" optional="hide"/>
                <field name="carrier_vessel_cut_off_datetime" optional="hide"/>
                <field name="carrier_warehouse_cut_off_datetime" optional="hide"/>
                <field name="carrier_vgm_cut_off_datetime" optional="hide"/>
                <field name="latest_milestone_id" optional="hide"/>

            </tree>
        </field>
    </record>

    <record id="freight_master_shipment_super_admin_form" model="ir.ui.view">
        <field name="name">freight.master.shipment.super.admin.view.form</field>
        <field name="model">freight.master.shipment</field>
        <field name="groups_id" eval="[(4, ref('freight_management.group_super_admin'))]"/>
        <field name="inherit_id" ref="freight_management.freight_master_shipment_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_fetch_containers_from_house']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('house_shipment_count', '=', 0), ('cargo_is_package_group', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//button[@name='action_download_container_numbers_template']" position="attributes">
                <attribute name="attrs">{}</attribute>
            </xpath>
            <xpath expr="//widget[@action='action_upload_container_list']" position="attributes">
                <attribute name="attrs">{'invisible': [('packaging_mode', '!=', 'container')]}</attribute>
            </xpath>
            <xpath expr="//button[@name='action_fetch_packages_from_house_shipment']" position="attributes">
                <attribute name="attrs">{'invisible': [('house_shipment_ids', '=', [])]}</attribute>
            </xpath>
            <xpath expr="//button[@name='action_remove_all_packages']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', '|', '|', ('transport_mode_id', '=', False), ('shipment_type_id', '=', False), ('cargo_type_id', '=', False), ('package_ids', '=', []),
                        ('container_ids', '=', [])]}</attribute>
            </xpath>
            <xpath expr="//button[@name='action_assign_container']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', '|', ('packaging_mode', '!=', 'container'), ('cargo_type_id', '=', False), ('container_ids', '=', [])]}</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_freight_shipment_master_calendar" model="ir.ui.view">
        <field name="name">freight.master.shipment.calendar</field>
        <field name="model">freight.master.shipment</field>
        <field name="arch" type="xml">
            <calendar string="Freight Master Shipment" date_start="shipment_date" date_stop="shipment_date" event_open_popup="true" mode="month" color="name" quick_add="False">
                <field name="shipment_date"/>
                <field name="name"/>
            </calendar>
        </field>
    </record>
</odoo>
