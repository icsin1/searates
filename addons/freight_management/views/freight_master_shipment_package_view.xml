<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_freight_master_shipment_package_tree" model="ir.ui.view">
        <field name="name">freight.master.shipment.package.tree</field>
        <field name="model">freight.master.shipment.package</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Package">
                <field name="house_shipment_id" />
                <field name="container_type_id" invisible="1"/>
                <field name="package_type_id" invisible="1"/>
                <field name="container_number"/>
                <field name="quantity"/>
                <field name="no_of_teu"/>
                <field name="seal_number"/>
                <field name="is_hazardous"/>
            </tree>
        </field>
    </record>

    <record id="view_freight_master_shipment_package_form" model="ir.ui.view">
        <field name="name">freight.master.shipment.package.form</field>
        <field name="model">freight.master.shipment.package</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Package">
                <sheet>
                    <div class="o_row">
                        <div class="col-6 px-0" attrs="{'invisible': [('package_mode', '!=', 'container')]}">
                            <label for="container_type_id"/>
                            <div class="oe_title">
                                <h1><field name="container_type_id" placeholder="Container Type" options="{'no_create': True}" attrs="{'required': [('package_mode', '=', 'container')]}"
                                    domain="[('transport_mode_id', '=', transport_mode_id)]"/></h1>
                            </div>
                        </div>
                        <div class="col-6 pl-0" attrs="{'invisible': [('package_mode', '!=', 'package')]}">
                            <label for="package_type_id"/>
                            <div class="oe_title">
                                <h1><field name="package_type_id" placeholder="Package Type" options="{'no_create': True}" attrs="{'required': [('package_mode', '=', 'package')]}"/></h1>
                            </div>
                        </div>
                    </div>
                    <group>
                        <group>
                            <field name="transport_mode_id" invisible="1"/>
                            <field name="mode_type" invisible="1"/>
                            <field name="shipment_id" invisible="1"/>
                            <field name="master_container_package_id" invisible="1"/>
                            <label for="quantity" string="Pack Count" class="font-weight-bold" attrs="{'invisible': [('package_mode', '!=', 'package')]}"/>
                            <field name="quantity" nolabel="1" attrs="{'invisible': [('package_mode', '!=', 'package')], 'required': [('package_mode', '=', 'package')]}"/>
                            <label for="quantity" string="Container Count" class="font-weight-bold" attrs="{'invisible': [('package_mode', '!=', 'container')]}"/>
                            <field name="quantity" nolabel="1" attrs="{'invisible': [('package_mode', '!=', 'container')], 'readonly': [('package_mode', '=', 'container')]}"/>
                            <field name="pack_count" attrs="{'invisible': [('package_mode', '!=', 'container')]}" force_save="1" readonly="1"/>
                            <field name="no_of_teu" invisible="1" force_save="1"/>
                            <label for="length" string="Dimentions (L-W-H)" attrs="{'invisible': ['|', ('master_container_package_id', '=', False), ('package_mode', '!=', 'package')]}"/>
                            <div class="o_row" attrs="{'invisible': ['|', ('master_container_package_id', '=', False), ('package_mode', '!=', 'package')]}">
                                <field name="length" attrs="{'required': [('master_container_package_id', '!=', False), ('package_mode', '=', 'package')]}"/>x
                                <field name="width" attrs="{'required': [('master_container_package_id', '!=', False), ('package_mode', '=', 'package')]}"/>x
                                <field name="height" attrs="{'required': [('master_container_package_id', '!=', False), ('package_mode', '=', 'package')]}"/>
                                <field name="dimension_uom_id" attrs="{'required': [('master_container_package_id', '!=', False), ('package_mode', '=', 'package')]}" options="{'no_create': True}"/>
                            </div>

                            <label for="total_master_weight_unit"/>
                            <div class="d-flex oe_inline">
                                <field name="total_master_weight_unit"/>&amp;nbsp;
                                <field name="container_master_weight_uom_id" options="{'no_open': True}"/>
                            </div>
                            <label for="total_master_volume_unit"/>
                            <div class="d-flex oe_inline">
                                <field name="total_master_volume_unit"/>&amp;nbsp;
                                <field name="container_master_volume_uom_id" options="{'no_open': True}"/>
                            </div>
                            <label for="total_master_volumetric_weight"/>
                            <div class="d-flex oe_inline">
                                <field name="total_master_volumetric_weight"/>&amp;nbsp;
                                <field name="container_master_volumetric_weight_uom_id" options="{'no_open': True}"/>
                            </div>
                            <label for="total_master_net_weight"/>
                            <div class="d-flex oe_inline">
                                <field name="total_master_net_weight"/>&amp;nbsp;
                                <field name="container_master_net_weight_uom_id" options="{'no_open': True}"/>
                            </div>
                        </group>
                        <group>
                            <field name="package_mode" invisible="1"/>
                            <field name="allow_container_number_ids" invisible="1"/>
                            <field name="container_number" options="{'no_create': True, 'no_open': True}" domain="[('id', 'in', allow_container_number_ids)]" attrs="{'invisible': [('mode_type', '=', 'air')]}"/>
                            <field name="container_type_id" placeholder="Container Type" options="{'no_create': True, 'no_open': True}" attrs="{'readonly': [('package_mode', '=', 'package')],
                                'invisible': ['|', ('package_mode', '=', 'container'),('mode_type', '=', 'air')]}" force_save="1" domain="[('transport_mode_id', '=', transport_mode_id)]"/>
                            <field name="seal_number" attrs="{'invisible': [('mode_type', '=', 'air')]}"/>
                            <field name="customs_seal_number" attrs="{'invisible': [('mode_type', '=', 'air')]}"/>
                            <field name="house_shipment_pack_id" invisible="1"/>
                            <field name="marksnnums" attrs="{'invisible': [('package_mode', '=', 'container')]}"/>
                            <field name="is_refrigerated" invisible="1"/>
                            <label for="container_temperature" attrs="{'invisible': [('is_refrigerated', '=', False)]}"/>
                            <div class="o_row">
                                <field name="container_temperature" attrs="{'invisible': [('is_refrigerated', '=', False)], 'required': [('is_refrigerated', '=', True)]}"/>
                                <field name="container_temperature_uom_id" options="{'no_create': True, 'no_open': True}" attrs="{'invisible': [('is_refrigerated', '=', False)], 'required': [('is_refrigerated', '=', True)]}"/>
                            </div>
                            <label for="max_temperature" attrs="{'invisible': [('is_refrigerated', '=', False)]}"/>
                            <div class="o_row">
                                <field name="max_temperature" attrs="{'invisible': [('is_refrigerated', '=', False)], 'required': [('is_refrigerated', '=', True)]}"/>
                                <field name="max_temperature_uom_id" options="{'no_create': True, 'no_open': True}" attrs="{'invisible': [('is_refrigerated', '=', False)],
                                    'required': [('is_refrigerated', '=', True)]}"/>
                            </div>
                            <field name="is_hazardous" widget="boolean_toggle" attrs="{'invisible': [('mode_type', '=', 'air')]}"/>

                        </group>
                    </group>
                    <group>
                        <field name="is_oog_container" invisible="1"/>
                        <group attrs="{'invisible': [('is_oog_container', '=', False)]}">
                            <label for="over_lenght"/>
                            <div class="d-flex oe_inline">
                                <field name="over_lenght"/>&amp;nbsp;
                                <field name="over_lenght_uom_id" options="{'no_open': True}"/>
                            </div>
                            <label for="over_height"/>
                            <div class="d-flex oe_inline">
                                <field name="over_height"/>&amp;nbsp;
                                <field name="over_height_uom_id" options="{'no_open': True}"/>
                            </div>
                            <label for="over_width"/>
                            <div class="d-flex oe_inline">
                                <field name="over_width"/>&amp;nbsp;
                                <field name="over_width_uom_id" options="{'no_open': True}"/>
                            </div>
                            <field name="is_req_loading_handling" widget="radio" options="{'horizontal': True}"/>
                            <field name="is_under_deck_requested" widget="boolean_toggle"/>
                        </group>
                    </group>
                    <group attrs="{'invisible': [('mode_type', '!=', 'sea')]}" >
                        <group>
                            <field name="stuffing_date"/>
                            <field name="stuffing_cfs_id"/>
                            <field name="stuffing_confirmed"/>
                        </group>
                        <group>
                             <field name="destuffing_date"/>
                            <field name="destuffing_cfs_id"/>
                            <field name="destuffing_confirmed"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Package Groups" name="package_groups"
                              attrs="{'invisible': [('package_mode', '!=', 'container')]}">
                            <div class="alert alert-info mb-2" role="alert">
                                <strong>Packages changes will be reflected in
                                    attached house shipment's packages as well.
                                </strong>
                            </div>
                            <field name="master_package_group_ids">
                                <tree editable="bottom" create="0" delete="0">
                                    <field name="master_sr_no"/>
                                    <field name="transport_mode_id" invisible="1"/>
                                    <field name="package_type_id" options="{'no_create': True}"
                                           attrs="{'required': [('package_mode', '=', 'package')]}"/>
                                    <field name="package_mode" invisible="1"/>
                                    <field name="quantity"/>
                                    <field name="weight_unit"/>
                                    <field name="weight_unit_uom_id" options="{'no_create': True, 'no_open': True}"/>
                                    <field name="volume_unit"/>
                                    <field name="volume_unit_uom_id" options="{'no_create': True, 'no_open': True}"/>
                                    <field name="volumetric_weight"/>
                                    <field name="weight_volume_unit_uom_id"
                                           options="{'no_create': True, 'no_open': True}"/>
                                    <field name="net_weight"/>
                                    <field name="net_weight_unit_uom_id" options="{'no_create': True, 'no_open': True}"/>
                                    <field name="description"/>
                                    <field name="shipment_id" invisible="1"/>
                                    <field name="container_type_id" invisible="1"/>
                                    <field name="allow_container_number_ids" invisible="1"/>
                                    <field name="house_shipment_pack_id" invisible="1"/>
                                    <button name="action_open_from_view" string=" " type="object"
                                            class="btn fa fa-ellipsis-h"/>
                                </tree>
                            </field>
                        </page>
                        <page name="commodities" string="Commodities"
                              attrs="{'invisible': [('package_mode', '!=', 'package')]}">
                            <div class="alert alert-info mb-2" role="alert">
                                <strong>Commodities changes will be reflected in
                                    attached house shipment's commodities as well.
                                </strong>
                            </div>
                            <field name="master_commodity_ids">
                                <tree editable="top" create="0" delete="0">
                                    <field name="commodity_id"/>
                                    <field name="pieces"/>
                                    <field name="pack_uom_id"/>
                                    <field name="gross_weight"/>
                                    <field name="weight_uom_id" options="{'no_create': True, 'no_open': True}"/>
                                    <field name="volume"/>
                                    <field name="volume_uom_id" options="{'no_create': True, 'no_open': True}"/>
                                    <field name="volumetric_weight"/>
                                    <field name="volumetric_weight_uom_id"
                                           options="{'no_create': True, 'no_open': True}"/>
                                    <field name="net_weight"/>
                                    <field name="net_weight_unit_uom_id" options="{'no_create': True, 'no_open': True}"/>
                                    <field name="shipping_bill_no" optional="hide"/>
                                    <field name="customer_order_no" optional="hide"/>
                                    <field name="shipper_ref_number" optional="hide"/>
                                    <field name="remarks"/>
                                    <field name="house_shipment_commodity_id" invisible="1"/>
                                    <button name="action_open_commodity_from_view" string=" " type="object"
                                            class="btn fa fa-ellipsis-h"/>
                                </tree>
                            </field>
                        </page>
                        <page name="hbl_description" string="HBL Description" attrs="{'invisible': [('mode_type', '=', 'air')]}">
                            <field name="hbl_description"/>
                        </page>
                        <page name="hawb_description" string="HAWB Description" attrs="{'invisible': [('mode_type', '!=', 'air')]}">
                            <field name="hbl_description"/>
                        </page>
                        <page name="haz_class" string="HAZ Class" attrs="{'invisible': [('is_hazardous', '=', False)]}">
							<group>
								<group>
                                
		                            <field name="haz_class_id" options="{'no_create': True, 'no_open': True}" attrs="{'invisible': [('is_hazardous', '=', False)], 'required': [('is_hazardous', '=', True)]}"/>
		                            <field name="un_code" attrs="{'invisible': [('is_hazardous', '=', False)]}"/>
		                            <field name="haz_sub_class_id" attrs="{'invisible': [('is_hazardous', '=', False)]}" options="{'no_create': True, 'no_open': True}"/>
		                            <field name="package_group" attrs="{'invisible': [('is_hazardous', '=', False)]}"/>
	                            </group>
	                            <group>
									<field name="package_info" attrs="{'invisible': [('is_hazardous', '=', False)]}" options="{'no_create': True, 'no_open': True}"/>
		                            <field name="marine_pollutant" attrs="{'invisible': [('is_hazardous', '=', False)]}"/>
		                            <field name="flash_point" attrs="{'invisible': [('is_hazardous', '=', False)]}"/>
		                            <field name="ems_number" attrs="{'invisible': [('is_hazardous', '=', False)]}"/>
		                            <field name="emergency_remark" attrs="{'invisible': [('is_hazardous', '=', False)]}"/>
		                        </group>
		                    </group>
						</page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="freight_shipment_package_item_view_tree" model="ir.ui.view">
        <field name="name">freight.master.shipment.package.item.view.tree</field>
        <field name="model">freight.master.shipment.package.item</field>
        <field name="arch" type="xml">
            <tree editable="bottom">
                <field name="description"/>
                <field name="value" sum="Total"/>
                <field name="quantity" sum="Total"/>
            </tree>
        </field>
    </record>

    <record id="view_freight_master_shipment_package_form_wizard" model="ir.ui.view">
        <field name="name">freight.master.shipment.package.form.wizard</field>
        <field name="model">freight.master.shipment.package</field>
        <field name="mode">primary</field>
        <field name="inherit_id" ref="freight_management.view_freight_master_shipment_package_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet" position="after">
                <footer>
                    <button type="object" string="Save" name="action_save" class="btn btn-primary"/>
                    <button type="special" special="cancel" string="Discard" class="btn btn-default"/>
                </footer>
            </xpath>
        </field>
    </record>

    <record id="view_freight_master_shipment_package_do_action_tree" model="ir.ui.view">
        <field name="name">freight.master.shipment.package.open.view.tree</field>
        <field name="model">freight.master.shipment.package</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Containers">
                <field name="container_number"/>
                <field name="container_type_id"/>
            </tree>
        </field>
    </record>

    <record id="freight_shipment_master_package_do_action_view_action" model="ir.actions.act_window">
        <field name="name">Containers</field>
        <field name="res_model">freight.master.shipment.package</field>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_freight_master_shipment_package_do_action_tree"/>
        <field name="domain">[
            ('shipment_id', '=', active_id),
            ('container_number', '!=', False)
        ]</field>
        <field name="target">new</field>
    </record>
</odoo>
