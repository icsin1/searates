<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <record id="finance_report_section_allocated_earnings" model="account.finance.report.section">
            <field name="name">Allocated Earnings</field>
            <field name="code">ALLOCATED_EARNINGS</field>
            <field name="computation_formula">-sum</field>
            <field name="sequence">2</field>
            <field name="level">2</field>
            <field name="data_domain" eval="[('account_id.user_type_id', '=', ref('account.data_unaffected_earnings'))]"/>
        </record>

        <!-- Report Settings -->
        <record id="finance_report_balance_sheet" model="account.finance.report">
            <field name="name">Balance Sheet</field>
        </record>

        <!-- Client Action -->
        <record id="action_account_reports__balance_sheet" model="ir.actions.client">
            <field name="name">Balance Sheet</field>
            <field name="tag">ics_account_reports.finance_reports</field>
            <field name="context" eval="{'model': 'account.finance.report', 'id': ref('ics_account_reports.finance_report_balance_sheet')}"/>
            <field name="res_model">account.move.line</field>
        </record>

        <!-- Sections -->

        <!-- Assets -->
        <record id="finance_report_balance_sheet_section_assets" model="account.finance.report.section">
            <field name="name">ASSETS</field>
            <field name="code">TA</field>
            <field name="report_id" ref="finance_report_balance_sheet"/>
            <field name="computation_formula">CA + FA + PNCA</field>
            <field name="sequence">1</field>
            <field name="level">0</field>
            <field name="validation_domain">[('account_id.user_type_id.internal_group', '=', 'asset')]</field>
        </record>
            <!-- Assets > Current Assets -->
            <record id="finance_report_balance_sheet_section_assets_current_assets_main" model="account.finance.report.section">
                <field name="name">Current Assets</field>
                <field name="code">CA</field>
                <field name="parent_id" ref="finance_report_balance_sheet_section_assets"/>
                <field name="computation_formula">BA + REC + CAS + PRE</field>
                <field name="sequence">1</field>
                <field name="level">1</field>
                <field name="validation_domain" eval="['|', ('account_id.user_type_id', 'in', [ref('account.data_account_type_liquidity'), ref('account.data_account_type_current_assets'), ref('account.data_account_type_prepayments')]), ('account_id.user_type_id.type', '=', 'receivable')]"/>
            </record>
                <!-- Assets > Current Assets > Bank and Cash Accounts -->
                <record id="finance_report_balance_sheet_section_assets_bank_cash" model="account.finance.report.section">
                    <field name="name">Bank and Cash Accounts</field>
                    <field name="code">BA</field>
                    <field name="parent_id" ref="finance_report_balance_sheet_section_assets_current_assets_main"/>
                    <field name="computation_formula">sum</field>
                    <field name="sequence">1</field>
                    <field name="level">2</field>
                    <field name="data_domain" eval="[('account_id.user_type_id', '=', ref('account.data_account_type_liquidity'))]"/>
                    <field name="group_by">account_id</field>
                </record>
                <!-- Assets > Current Assets > Receivables -->
                <record id="finance_report_balance_sheet_section_assets_receivables" model="account.finance.report.section">
                    <field name="name">Receivables</field>
                    <field name="code">REC</field>
                    <field name="parent_id" ref="finance_report_balance_sheet_section_assets_current_assets_main"/>
                    <field name="computation_formula">sum</field>
                    <field name="sequence">2</field>
                    <field name="level">2</field>
                    <field name="data_domain">[('account_id.user_type_id.type', '=', 'receivable'), ('account_id.exclude_from_aged_reports', '=', False)]</field>
                    <field name="group_by">account_id</field>
                </record>
                <!-- Assets > Current Assets > Currenct Assets -->
                <record id="finance_report_balance_sheet_section_assets_current_assets" model="account.finance.report.section">
                    <field name="name">Current Assets</field>
                    <field name="code">CAS</field>
                    <field name="parent_id" ref="finance_report_balance_sheet_section_assets_current_assets_main"/>
                    <field name="computation_formula">sum</field>
                    <field name="sequence">3</field>
                    <field name="level">2</field>
                    <field name="data_domain" eval="['|', ('account_id.user_type_id', '=', ref('account.data_account_type_current_assets')), '&amp;', ('account_id.user_type_id.type', '=', 'receivable'), ('account_id.exclude_from_aged_reports', '=', True)]"/>
                    <field name="group_by">account_id</field>
                </record>
                <!-- Assets > Current Assets > Prepayments -->
                <record id="finance_report_balance_sheet_section_assets_prepayments" model="account.finance.report.section">
                    <field name="name">Prepayments</field>
                    <field name="code">PRE</field>
                    <field name="parent_id" ref="finance_report_balance_sheet_section_assets_current_assets_main"/>
                    <field name="computation_formula">sum</field>
                    <field name="sequence">4</field>
                    <field name="level">2</field>
                    <field name="data_domain" eval="[('account_id.user_type_id', '=', ref('account.data_account_type_prepayments'))]"/>
                    <field name="group_by">account_id</field>
                </record>
            <!-- Assets > Plus Fixed Assets -->
            <record id="finance_report_balance_sheet_section_assets_plus_fixed_assets" model="account.finance.report.section">
                <field name="name">Plus Fixed Assets</field>
                <field name="code">FA</field>
                <field name="parent_id" ref="finance_report_balance_sheet_section_assets"/>
                <field name="computation_formula">sum</field>
                <field name="sequence">2</field>
                <field name="level">1</field>
                <field name="validation_domain" eval="[('account_id.user_type_id', '=', ref('account.data_account_type_fixed_assets'))]"/>
                <field name="group_by">account_id</field>
            </record>
            <!-- Assets > Plus Non-current Assets -->
            <record id="finance_report_balance_sheet_section_assets_plus_non_current_assets" model="account.finance.report.section">
                <field name="name">Plus Non-current Assets</field>
                <field name="code">PNCA</field>
                <field name="parent_id" ref="finance_report_balance_sheet_section_assets"/>
                <field name="computation_formula">sum</field>
                <field name="sequence">3</field>
                <field name="level">1</field>
                <field name="validation_domain" eval="[('account_id.user_type_id', '=', ref('account.data_account_type_non_current_assets'))]"/>
                <field name="group_by">account_id</field>
            </record>
        <!-- LIABILITIES -->
        <record id="finance_report_balance_sheet_section_liabilities" model="account.finance.report.section">
            <field name="name">LIABILITIES</field>
            <field name="code">L</field>
            <field name="report_id" ref="finance_report_balance_sheet"/>
            <field name="computation_formula">CL + NL</field>
            <field name="sequence">2</field>
            <field name="level">0</field>
            <field name="validation_domain">[('account_id.user_type_id.internal_group', '=', 'liability')]</field>
        </record>
            <!-- LIABILITIES > Current Liabilities -->
            <record id="finance_report_balance_sheet_section_liabilities_current_liabilities" model="account.finance.report.section">
                <field name="name">Current Liabilities</field>
                <field name="code">CL</field>
                <field name="parent_id" ref="finance_report_balance_sheet_section_liabilities"/>
                <field name="computation_formula">CL1 + CL2</field>
                <field name="sequence">1</field>
                <field name="level">1</field>
                <field name="validation_domain" eval="['|', ('account_id.user_type_id', 'in', [ref('account.data_account_type_current_liabilities'), ref('account.data_account_type_credit_card')]), ('account_id.user_type_id.type', '=', 'payable')]"/>
            </record>
                <!-- LIABILITIES > Current Liabilities -->
                <record id="finance_report_balance_sheet_section_liabilities_current_liabilities_sub" model="account.finance.report.section">
                    <field name="name">Current Liabilities</field>
                    <field name="code">CL1</field>
                    <field name="parent_id" ref="finance_report_balance_sheet_section_liabilities_current_liabilities"/>
                    <field name="computation_formula">-sum</field>
                    <field name="sequence">1</field>
                    <field name="level">2</field>
                    <field name="validation_domain" eval="['|', ('account_id.user_type_id', 'in', [ref('account.data_account_type_current_liabilities'), ref('account.data_account_type_credit_card')]), '&amp;', ('account_id.user_type_id.type', '=', 'payable'), ('account_id.exclude_from_aged_reports', '=', True)]"/>
                    <field name="group_by">account_id</field>
                </record>
                <!-- LIABILITIES > Payables -->
                <record id="finance_report_balance_sheet_section_liabilities_payables" model="account.finance.report.section">
                    <field name="name">Payables</field>
                    <field name="code">CL2</field>
                    <field name="parent_id" ref="finance_report_balance_sheet_section_liabilities_current_liabilities"/>
                    <field name="computation_formula">-sum</field>
                    <field name="sequence">2</field>
                    <field name="level">2</field>
                    <field name="validation_domain" eval="[('account_id.user_type_id.type', '=', 'payable'), ('account_id.exclude_from_aged_reports', '=', False)]"/>
                    <field name="group_by">account_id</field>
                </record>
            <!-- LIABILITIES > Plus Non-current Liabilities -->
            <record id="finance_report_balance_sheet_section_liabilities_plus_non_current_liabilities" model="account.finance.report.section">
                <field name="name">Plus Non-current Liabilities</field>
                <field name="code">NL</field>
                <field name="parent_id" ref="finance_report_balance_sheet_section_liabilities"/>
                <field name="computation_formula">-sum</field>
                <field name="sequence">2</field>
                <field name="level">1</field>
                <field name="validation_domain" eval="[('account_id.user_type_id', '=', ref('account.data_account_type_non_current_liabilities'))]"/>
            </record>
        <!-- EQUITY -->
        <record id="finance_report_balance_sheet_section_equity" model="account.finance.report.section">
            <field name="name">EQUITY</field>
            <field name="code">EQ</field>
            <field name="report_id" ref="finance_report_balance_sheet"/>
            <field name="computation_formula">UNAFFECTED_EARNINGS + RETAINED_EARNINGS</field>
            <field name="sequence">3</field>
            <field name="level">0</field>
        </record>
            <!-- EQUITY > Unallocated Earnings -->
            <record id="finance_report_balance_sheet_section_equity_unaffected_earnings" model="account.finance.report.section">
                <field name="name">Unallocated Earnings</field>
                <field name="code">UNAFFECTED_EARNINGS</field>
                <field name="parent_id" ref="finance_report_balance_sheet_section_equity"/>
                <field name="computation_formula">CURR_YEAR_EARNINGS + PREV_YEAR_EARNINGS</field>
                <field name="sequence">1</field>
                <field name="level">1</field>
            </record>
                <!-- EQUITY > Unallocated Earnings -->
                <record id="finance_report_balance_sheet_section_equity_unaffected_earnings" model="account.finance.report.section">
                    <field name="name">Unallocated Earnings</field>
                    <field name="code">UNAFFECTED_EARNINGS</field>
                    <field name="parent_id" ref="finance_report_balance_sheet_section_equity"/>
                    <field name="computation_formula">CURR_YEAR_EARNINGS + PREV_YEAR_EARNINGS</field>
                    <field name="sequence">1</field>
                    <field name="level">2</field>
                </record>
                    <!-- EQUITY > Unallocated Earnings > Current Year Unallocated Earnings -->
                    <record id="finance_report_balance_sheet_section_equity_curr_year_earnings" model="account.finance.report.section">
                        <field name="name">Current Year Unallocated Earnings</field>
                        <field name="code">CURR_YEAR_EARNINGS</field>
                        <field name="parent_id" ref="finance_report_balance_sheet_section_equity_unaffected_earnings"/>
                        <field name="computation_formula">CURR_YEAR_EARNINGS_PNL + CURR_YEAR_EARNINGS_ALLOC</field>
                        <field name="sequence">1</field>
                        <field name="level">3</field>
                    </record>
                        <!-- EQUITY > Unallocated Earnings > Current Year Unallocated Earnings > Current Year Earnings -->
                        <record id="finance_report_balance_sheet_section_equity_curr_year_earnings_pnl" model="account.finance.report.section">
                            <field name="name">Current Year Earnings</field>
                            <field name="code">CURR_YEAR_EARNINGS_PNL</field>
                            <field name="parent_id" ref="finance_report_balance_sheet_section_equity_curr_year_earnings"/>
                            <field name="computation_formula"></field>
                            <field name="date_scope">from_fiscal_year</field>
                            <field name="section_id" ref="ics_account_reports.finance_report_pnl_section_net_profit"/>
                            <field name="data_domain" eval="[('account_id.user_type_id.internal_group', 'in', ['income', 'expense'])]"/>
                            <field name="sequence">1</field>
                            <field name="level">4</field>
                        </record>
                        <!-- EQUITY > Unallocated Earnings > Current Year Unallocated Earnings > Current Year Allocated Earnings -->
                        <record id="finance_report_balance_sheet_section_equity_curr_year_earnings_alloc" model="account.finance.report.section">
                            <field name="name">Current Year Allocated Earnings</field>
                            <field name="code">CURR_YEAR_EARNINGS_ALLOC</field>
                            <field name="parent_id" ref="finance_report_balance_sheet_section_equity_curr_year_earnings"/>
                            <field name="computation_formula">-sum</field>
                            <field name="date_scope">from_fiscal_year</field>
                            <field name="data_domain" eval="[('account_id.user_type_id', '=', ref('account.data_unaffected_earnings'))]"/>
                            <field name="sequence">2</field>
                            <field name="level">4</field>
                        </record>
                    <!-- EQUITY > Unallocated Earnings > Previous Years Unallocated Earnings -->
                    <record id="finance_report_balance_sheet_section_equity_prev_year_earnings" model="account.finance.report.section">
                        <field name="name">Previous Years Unallocated Earnings</field>
                        <field name="code">PREV_YEAR_EARNINGS</field>
                        <field name="parent_id" ref="finance_report_balance_sheet_section_equity_unaffected_earnings"/>
                        <field name="computation_formula">-sum - CURR_YEAR_EARNINGS</field>
                        <field name="sequence">2</field>
                        <field name="date_scope">from_begin</field>
                        <field name="section_id" ref="finance_report_section_allocated_earnings"/>
                        <field name="level">3</field>
                        <field name="data_domain" eval="['|', ('account_id.user_type_id.internal_group', 'in', ['income', 'expense']), ('account_id.user_type_id', '=', ref('account.data_unaffected_earnings'))]"/>
                    </record>
                <!-- EQUITY > Retained Earnings -->
                <record id="finance_report_balance_sheet_section_equity_retained_earnings" model="account.finance.report.section">
                    <field name="name">Retained Earnings</field>
                    <field name="code">RETAINED_EARNINGS</field>
                    <field name="parent_id" ref="finance_report_balance_sheet_section_equity"/>
                    <field name="computation_formula">-sum</field>
                    <field name="sequence">2</field>
                    <field name="level">2</field>
                    <field name="data_domain" eval="[('account_id.user_type_id', '=', ref('account.data_account_type_equity'))]"/>
                </record>
        <!-- LIABILITIES + EQUITY -->
        <record id="finance_report_balance_sheet_section_liabilities_and_equity" model="account.finance.report.section">
            <field name="name">LIABILITIES + EQUITY</field>
            <field name="code">LE</field>
            <field name="report_id" ref="finance_report_balance_sheet"/>
            <field name="computation_formula">L + EQ</field>
            <field name="group_by" eval="False"/>
            <field name="sequence">4</field>
            <field name="level">0</field>
        </record>
        <!-- OFF BALANCE SHEET ACCOUNTS -->
        <record id="finance_report_balance_sheet_section_off_balance_sheet_accounts" model="account.finance.report.section">
            <field name="name">OFF BALANCE SHEET ACCOUNTS</field>
            <field name="code">OS</field>
            <field name="report_id" ref="finance_report_balance_sheet"/>
            <field name="computation_formula">-sum</field>
            <field name="data_domain" eval="[('account_id.user_type_id', '=', ref('account.data_account_off_sheet'))]"/>
            <field name="validation_domain">[('account_id.user_type_id.internal_group', '=', 'off_balance')]</field>
            <field name="group_by">account_id</field>
            <field name="sequence">4</field>
            <field name="level">0</field>
        </record>
    </data>

</odoo>
