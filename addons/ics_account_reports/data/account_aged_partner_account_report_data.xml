<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <record id="ics_reports_aged_partner_account_report" model="web.report">
            <field name="name">Aged Partner Report</field>
            <field name="model_id" ref="account.model_account_move_line"/>
            <field name="data_match_domain" eval="[('move_id.state', '=', 'posted'), ('partner_id', '!=', False), ('account_id.exclude_from_aged_reports', '=', False)]"/>
            <field name="filter_multi_company">selector</field>
            <field name="filter_date_type">as_on_today</field>
            <field name="default_opening_date">today</field>
            <field name="date_field" ref="account.field_account_move_line__date"/>
            <field name="is_account_report" eval="True"/>
            <field name="report_handler_model_id" ref="ics_account_reports.model_partner_aged_report_handler"/>
        </record>

        <record id="ics_report_aged_partner_report_line" model="web.report.line">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Partners</field>
            <field name="code">AGEDPAY</field>
            <field name="sequence">1</field>
            <field name="hierarchy_level">1</field>
            <field name="group_total" eval="True"/>
            <field name="group_by_fields">partner_id,id</field>
            <field name="action_id" ref="account.action_move_journal_line"/>
            <field name="action_field_id" ref="account.field_account_move_line__move_id"/>
            <field name="strict_on_date_range" eval="False"/>
        </record>

        <!-- EXPRESSION -->
        <record id="ics_report_aged_partner_report_move_name" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">move_name</field>
            <field name="computation_engine">field</field>
            <field name="formula_expression">move_name</field>
            <field name="value_type">string</field>
        </record>

        <record id="ics_report_aged_partner_report_move_name_title" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">title</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">move_name</field>
            <field name="value_type">string</field>
        </record>

        <record id="ics_report_aged_partner_report_name" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">label</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="subformula_expression">label</field>
            <field name="value_type">string</field>
        </record>

        <record id="ics_report_aged_partner_report_bill_date" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">invoice_date</field>
            <field name="computation_engine">field</field>
            <field name="formula_expression">invoice_date</field>
            <field name="value_type">date</field>
        </record>

        <record id="ics_report_aged_partner_report_date_maturity" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">date_maturity</field>
            <field name="computation_engine">field</field>
            <field name="formula_expression">date_maturity</field>
            <field name="value_type">date</field>
        </record>

        <record id="ics_report_aged_partner_report_amount_currency" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">amount_currency</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="value_type">monetary</field>
            <field name="currency_field_name">currency_id</field>
        </record>

        <record id="ics_report_aged_partner_report_currency_id_id" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">currency_id</field>
            <field name="computation_engine">field</field>
            <field name="formula_expression">currency_id</field>
            <field name="value_type">string</field>
        </record>

        <record id="ics_report_aged_partner_report_currency_code" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">currency_code</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="value_type">string</field>
        </record>

        <record id="ics_report_aged_partner_report_account_id_code" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">account_id</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="subformula_expression">account_id</field>
            <field name="value_type">string</field>
        </record>

        <record id="ics_report_aged_partner_report_period0" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">period0</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="subformula_expression">period0</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_period1" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">period1</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="subformula_expression">period1</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_period2" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">period2</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="subformula_expression">period2</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_period3" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">period3</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="subformula_expression">period3</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_period4" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">period4</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="subformula_expression">period4</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_period5" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">period5</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="subformula_expression">period5</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_total" model="web.report.expression">
            <field name="web_report_line_id" ref="ics_report_aged_partner_report_line"/>
            <field name="name">amount_residual</field>
            <field name="computation_engine">python_code</field>
            <field name="formula_expression">_report_handler_partner_aged_values</field>
            <field name="subformula_expression">amount_residual</field>
            <field name="value_type">monetary</field>
        </record>

        <!-- COLUMN -->
        <record id="ics_report_aged_partner_report_column_label" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Label</field>
            <field name="expression_label">label</field>
            <field name="sequence">1</field>
            <field name="value_type">string</field>
        </record>

        <record id="ics_report_aged_partner_report_column_bill_date" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Bill Date</field>
            <field name="expression_label">invoice_date</field>
            <field name="sequence">2</field>
            <field name="value_type">date</field>
        </record>

        <record id="ics_report_aged_partner_report_column_due_date" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Due Date</field>
            <field name="expression_label">date_maturity</field>
            <field name="sequence">3</field>
            <field name="value_type">date</field>
        </record>

        <record id="ics_report_aged_partner_report_column_amount_currency" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Amount Currency</field>
            <field name="expression_label">amount_currency</field>
            <field name="sequence">4</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_column_currency_code" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Currency</field>
            <field name="expression_label">currency_code</field>
            <field name="sequence">5</field>
            <field name="value_type">string</field>
        </record>

        <record id="ics_report_aged_partner_report_column_account_id" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Account</field>
            <field name="expression_label">account_id</field>
            <field name="sequence">6</field>
            <field name="value_type">string</field>
        </record>

        <record id="ics_report_aged_partner_report_column_as_of" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">As of</field>
            <field name="expression_label">period0</field>
            <field name="sequence">7</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_column_1_30" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">1-30</field>
            <field name="expression_label">period1</field>
            <field name="sequence">8</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_column_31_60" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">31-60</field>
            <field name="expression_label">period2</field>
            <field name="sequence">9</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_column_61_90" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">61-90</field>
            <field name="expression_label">period3</field>
            <field name="sequence">10</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_column_91_120" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">91-120</field>
            <field name="expression_label">period4</field>
            <field name="sequence">11</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_column_120_above" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">&gt;120</field>
            <field name="expression_label">period5</field>
            <field name="sequence">12</field>
            <field name="value_type">monetary</field>
        </record>

        <record id="ics_report_aged_partner_report_column_total" model="web.report.column">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Total</field>
            <field name="expression_label">amount_residual</field>
            <field name="sequence">13</field>
            <field name="value_type">monetary</field>
        </record>

        <!-- Filter -->

        <record id="ics_report_aged_receivable_filter_account" model="web.report.filter">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Account:</field>
            <field name="model_id" ref="account.model_account_move_line"/>
            <field name="filter_key">filter_account</field>
            <field name="filter_type">choice_multi</field>
            <field name="icon">fa-folder</field>
            <field name="sequence">0</field>
            <field name="choice_ids" eval="[
                (6, False, []),
                (0, 0, {
                    'name': 'Payable',
                    'choice_key': 'payable',
                    'is_default': True,
                    'sequence': 1
                }),
                (0, 0, {
                    'name': 'Non Trade Payable',
                    'choice_key': 'non_trade_payable',
                    'sequence': 2
                }),
            ]"/>
        </record>

        <record id="ics_report_aged_receivable_filter_vendor" model="web.report.filter">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Partner</field>
            <field name="filter_key">filter_partner</field>
            <field name="model_id" ref="account.model_account_move_line"/>
            <field name="ir_model_field_id" ref="account.field_account_move_line__partner_id"/>
            <field name="filter_type">multi_relation</field>
            <field name="icon">fa-users</field>
            <field name="sequence">1</field>
        </record>

        <record id="ics_report_aged_receivable_filter_based_on_date" model="web.report.filter">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Based On</field>
            <field name="model_id" ref="account.model_account_move_line"/>
            <field name="filter_key">filter_based_on</field>
            <field name="filter_type">choice</field>
            <field name="icon">fa-file</field>
            <field name="sequence">2</field>
            <field name="choice_ids" eval="[
                (6, False, []),
                (0, 0, {
                    'name': 'Due Date',
                    'choice_key': 'due_date',
                    'is_default': True,
                    'sequence': 1
                }),
                (0, 0, {
                    'name': 'Invoice Date',
                    'choice_key': 'date',
                    'sequence': 2
                }),
            ]"/>
        </record>

        <record id="ics_report_aged_receivable_filter_day_range" model="web.report.filter">
            <field name="web_report_id" ref="ics_reports_aged_partner_account_report"/>
            <field name="name">Days</field>
            <field name="model_id" ref="account.model_account_move_line"/>
            <field name="filter_key">filter_day_range</field>
            <field name="filter_type">input</field>
            <field name="default_value">30</field>
            <field name="icon">fa-calendar-o</field>
            <field name="sequence">3</field>
        </record>

    </data>
</odoo>
