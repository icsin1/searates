<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_tariff_service_wizard_form" model="ir.ui.view">
        <field name="name">tariff.service.wizard.form</field>
        <field name="model">tariff.service.wizard</field>
        <field name="arch" type="xml">
            <form string="Tariff Charges">
                <field name="house_shipment_id" invisible="1"/>
                <field name="master_shipment_id" invisible="1"/>
                <field name="company_id" invisible="1"/>
                <field name="tariff_type" invisible="1"/>
                <field name="sell_charge_master" invisible="1"/>
                <field name="buy_charge_master" invisible="1"/>
                <group col="6" attrs="{'invisible': ['|', ('tariff_for', '!=', 'shipment'), ('tariff_type', '=', 'charge_master')]}">
                    <group colspan="2">
                        <field name="shipment_type_id" options="{'no_create': True, 'no_open': True}" attrs="{'invisible': [('tariff_for', '!=', 'shipment')], 'required': [('tariff_for', '=', 'shipment')]}"/>
                    </group>
                    <group colspan="2">
                        <field name="transport_mode_id" options="{'no_create': True, 'no_open': True}" attrs="{'invisible': [('tariff_for', '!=', 'shipment')], 'required': [('tariff_for', '=', 'shipment')]}"/>
                    </group>
                    <group colspan="2">
                        <field name="cargo_type_domain" invisible="1" />
                        <field name="cargo_type_id" domain="cargo_type_domain" options="{'no_create': True, 'no_open': True}" attrs="{'invisible': [('tariff_for', '!=', 'shipment')], 'required': [('tariff_for', '=', 'shipment')]}"/>
                    </group>
                </group>
                <group attrs="{'invisible': [('tariff_type', '=', 'charge_master')]}">
                    <group>
                        <field name="tariff_for" invisible="1"/>
                        <field name="customer_id" options="{'no_create': True, 'no_create_edit': True, 'no_open': True}" attrs="{'invisible': [('tariff_type', '!=', 'sell_tariff')]}"/>
                        <field name="vendor_ids" widget="many2many_tags" options="{'no_create': True, 'no_create_edit': True, 'no_open': True}" attrs="{'invisible': [('tariff_type', '!=', 'buy_tariff')]}"/>
                    </group>
                </group>
                <group attrs="{'invisible': [('tariff_type', '=', 'charge_master')]}">
                    <group string="Location">
                        <field name="ignore_location" widget="boolean_toggle"/>
                        <label for="origin_id" string="Origin-Destination" attrs="{'invisible': [('ignore_location', '=', True)]}"/>
                        <div class="o_row" attrs="{'invisible': [('ignore_location', '=', True)]}">
                            <field name="origin_id" nolabel="1" attrs="{'required': [('ignore_location', '=', False), ('tariff_type', '!=', 'charge_master')]}" options="{'no_create': True, 'no_create_edit': True, 'no_open': True}"/> to
                            <field name="destination_id" nolabel="1" attrs="{'required': [('ignore_location', '=', False), ('tariff_type', '!=', 'charge_master')]}" options="{'no_create': True, 'no_create_edit': True, 'no_open': True}"/>
                        </div>
                        <field name="origin_country_id" invisible="1"/>
                        <field name="destination_country_id" invisible="1"/>
                        <label for="origin_port_id" string="Origin Port-Destination Port" attrs="{'invisible': [('ignore_location', '=', True)]}"/>
                        <div class="o_row" attrs="{'invisible': [('ignore_location', '=', True)]}">
                            <field name="origin_port_id" nolabel="1" attrs="{'required': [('ignore_location', '=', False), ('tariff_type', '!=', 'charge_master')]}" options="{'no_create': True, 'no_create_edit': True, 'no_open': True}"/> to
                            <field name="destination_port_id" nolabel="1" attrs="{'required': [('ignore_location', '=', False), ('tariff_type', '!=', 'charge_master')]}" options="{'no_create': True, 'no_create_edit': True, 'no_open': True}"/>
                        </div>
                    </group>
                </group>
                <field name="charge_domain" invisible="1"/>
                <field name="domain_measurement_ids" invisible="1"/>
                <field name="charge_ids" domain="charge_domain" widget="many2many_tags" options="{'no_create': True, 'no_create_edit': True}" attrs="{'required': [('tariff_type', '=', 'charge_master')], 'invisible': [('tariff_type', '!=', 'charge_master')]}"/>
                <br/>
                <field name="msg" attrs="{'invisible': [('msg', '=', False)]}" class="text-danger" readonly="1"/>
                <label for="include_all_tariff" attrs="{'invisible': ['|', ('tariff_type', '=', 'charge_master'), ('msg', '!=', False)]}"/>
                <field name="include_all_tariff" widget="boolean_toggle" attrs="{'invisible': ['|', ('tariff_type', '=', 'charge_master'), ('msg', '!=', False)]}"/>
                <field name="tariff_service_line_ids">
                    <tree editable="bottom" create="0">
                        <field name="include_tariff" string="#" widget="boolean_toggle" attrs="{'column_invisible': [('parent.include_all_tariff', '=', True)]}"/>
                        <field name="tariff_service_wiz_id" invisible="1"/>
                        <field name="sell_tariff_line_id" invisible="1"/>
                        <field name="buy_tariff_line_id" invisible="1"/>
                        <field name="sequence" invisible="1"/>
                        <field name="service_name"/>
                        <field name="company_id" invisible="1"/>
                        <field name="currency_id" invisible="1"/>
                        <field name="product_id" invisible="1" force_save="1" attrs="{'readonly': [('parent.tariff_type', '!=', 'charge_master')]}" options="{'no_create_edit': True, 'no_create': True}"/>
                        <field name="uom_id" invisible="1"/>
                        <field name="creditor_partner_id" string="Vendor/Agent" attrs="{'column_invisible': ['|', ('parent.buy_charge_master', '=', False), ('parent.tariff_type', 'not in', ['buy_tariff', 'charge_master'])], 'readonly': [('parent.tariff_type', '=', 'buy_tariff')], 'required': [('parent.tariff_type', '=', 'charge_master'), '|', ('parent.house_shipment_id', '!=', False), ('parent.master_shipment_id', '!=', False)]}" force_save="1"
                                domain="[('parent_id', '=', False), ('category_ids.is_vendor', '=', True), '|', ('company_id', '=', company_id), ('company_id', '=', False)]" options="{'no_create': True, 'no_open': True}"/>
                        <field name="creditor_address_id" invisible="1"/>
                        <field name="debtor_partner_id" string="Customer" attrs="{'column_invisible': ['|', ('parent.sell_charge_master', '=', False), ('parent.tariff_type', '!=', 'sell_tariff')]}" readonly="1" force_save="1"/>
                        <field name="debtor_address_id" invisible="1"/>
                        <field name="quantity"/>
                        <field name="measurement_basis_id" domain="[('id', 'in' , parent.domain_measurement_ids), ('transport_mode_ids', '=', parent.transport_mode_id)]"/>
                        <field name="is_container_type_basis" invisible="1"/>
                        <field name="container_type_id" options="{'no_create': 1, 'no_open': 1}" attrs="{'readonly': [('is_container_type_basis', '=', False)], 'required': [('is_container_type_basis', '=', True)]}"/>
                        <field name="cost_amount_rate" attrs="{'column_invisible': ['|', ('parent.buy_charge_master', '=', False), ('parent.tariff_type', 'not in', ['buy_tariff', 'charge_master'])]}"/>
                        <field name="cost_currency_id" invisible="1"/>
                        <field name="cost_currency_mismatch" invisible="1"/>
                        <field name="cost_conversion_rate" invisible="1"/>
                        <field name="tax_ids" widget="many2many_tags" invisible="1"/>
                        <field name="property_account_income_id" invisible="1"/>
                        <field name="sell_amount_rate" attrs="{'column_invisible': ['|', ('parent.sell_charge_master', '=', False), ('parent.tariff_type', 'not in', ['sell_tariff', 'charge_master'])]}"/>
                        <field name="sell_currency_id" invisible="1"/>
                        <field name="sell_currency_mismatch" invisible="1"/>
                        <field name="sell_conversion_rate" invisible="1"/>
                        <field name="supplier_tax_ids" widget="many2many_tags" invisible="1"/>
                        <field name="property_account_expense_id" invisible="1"/>
                        <field name="cost_remarks" string="Cost Remarks" attrs="{'column_invisible': ['|', ('parent.buy_charge_master', '=', False), ('parent.tariff_type', '=', 'sell_tariff')]}"/>
                        <field name="sell_remarks" string="Revenue Remarks" attrs="{'column_invisible': ['|', ('parent.sell_charge_master', '=', False), ('parent.tariff_type', '=', 'buy_tariff')]}"/>
                    </tree>
                </field>
                <footer>
                    <button type="object" string="Add to Charges" name="update_tariff_to_record" class="btn-primary"/>
                    <button type="object" string="Override to Charges" name="update_tariff_to_record" class="btn-primary" attrs="{'invisible': [('tariff_type', '!=', 'charge_master')]}" context="{'override': True}"/>
                    <button type="special" special="cancel" string="Cancel" class="btn-default"/>
                </footer>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="tariff_service_wizard_wizard_action">
        <field name="name">Fetch Tariff Charges</field>
        <field name="res_model">tariff.service.wizard</field>
        <field name="view_mode">form</field>
        <field name="context">{}</field>
        <field name="target">new</field>
    </record>

</odoo>
