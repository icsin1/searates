<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="portal_breadcrumbs" inherit_id="portal.portal_breadcrumbs">
        <xpath expr="//a[@href='/my/home']" position="attributes">
            <attribute name="href">/dashboard</attribute>
            <attribute name="t-att-class">'d-none' if request.httprequest.path == '/dashboard' else ''</attribute>
        </xpath>
    </template>

    <template id="ics_customer_portal_layout" name="Customer Portal">
        <t t-call="portal.frontend_layout">
            <t t-set="is_portal" t-value="True"/>
            <div id="wrap" class='o_portal_wrap o_portal_my_home ics_customer_portal d-flex h-100'>
                <div class="d-flex flex-fill">
                    <div class="ics_portal_menu_container d-flex bg-100 shadow-sm border-right">
                        <t t-call="ics_customer_portal_base.ics_customer_portal_menu"/>
                    </div>
                    <div class="ics_portal_main_content w-100">
                        <div class="d-flex">
                            <div class="flex-fill">
                                <t t-call="portal.portal_breadcrumbs"></t>
                            </div>
                            <div>
                                <t t-call="ics_customer_portal_base.action_menu"/>
                            </div>
                        </div>
                        <t t-out="0"/>
                    </div>
                </div>
            </div>
        </t>
    </template>
    <template id="action_menu" name="Action Menu for Screen">
        <div class="action-buttons"/>
    </template>
    <template id="ics_customer_portal_layout_view" name="Customer Portal">
        <t t-call="portal.frontend_layout">
            <t t-set="is_portal" t-value="True"/>
            <div id="wrap" class='o_portal_wrap ics_customer_portal d-flex h-100'>
                <div class="d-flex flex-fill">
                    <div class="ics_portal_menu_container d-flex bg-100 shadow-sm border-right">
                        <t t-call="ics_customer_portal_base.ics_customer_portal_menu"/>
                    </div>
                    <div class="ics_portal_main_content w-100">
                        <t t-out="0"/>
                    </div>
                </div>
            </div>
        </t>
    </template>
    <template id="ics_customer_portal_menu">
        <div t-if="website and not website.is_public_user() and request.httprequest.path.startswith('/dashboard')" class="d-flex flex-fill">
            <ul class="nav flex-column d-flex sidebar-menu flex-fill portal-nav">
                <li class="nav-item" id="customer_portal_dashboard">
                    <a href="/dashboard" class="nav-link">
                        <i class="fa fa-user"></i> Dashboard
                    </a>
                </li>
            </ul>
        </div>
    </template>

    <template id="dashboard" name="Dashboard">
        <t t-call="ics_customer_portal_base.ics_customer_portal_layout">
            <div class="d-flex flex-column">
                <div class="o_portal_docs card-deck">
                </div>
            </div>
        </t>
    </template>

    <template id="ics_customer_portal_sidebar" name="Sidebar">
        <t t-call="ics_customer_portal_base.ics_customer_portal_layout_view">
            <body data-spy="scroll" data-target=".navspy" data-offset="50">
                <div class="container o_portal_sidebar"></div>
                <div class="oe_structure mb32" id="oe_structure_portal_sidebar_1"/>
            </body>
        </t>
    </template>

    <template id="ics_customer_portal_searchbar" name="Portal Search">
        <t t-if="cards" t-out="cards"/>
        <nav t-attf-class="navbar navbar-light navbar-expand-lg border py-0 mb-2 o_portal_navbar border-0 {{classes if classes else ''}} {{'mt-3 rounded' if breadcrumbs_searchbar else 'border-top-0' }}">

            <!--  Collapse button -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#o_portal_navbar_content" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle filters">
                <span class="navbar-toggler-icon small"/>
            </button>


            <div class="collapse navbar-collapse" id="o_portal_navbar_content">
                <t t-foreach="searchbar_filters" t-as="option">
                    <a t-att-href="default_url + '?' + keep_query('*', filterby=option)"
                    t-attf-class="p-2 m-2 text-center rounded dropdown-item#{filterby == option and ' active text-white' or ' bg-100'}">
                        <span t-esc="searchbar_filters[option].get('label')"/>
                    </a>
                </t>
            </div>
        </nav>
    </template>

    <template id="freight_portal_docs_entry" inherit_id="freight_website.freight_portal_docs_entry">
        <xpath expr="//div" position="replace">
            <div class="text-center rounded border-light w-25 p-2">
                <a t-att-href="url" t-att-title="title" t-attf-class="text-decoration-none d-flex flex-column flex-fill rounded #{classes or 'bg-100'}">
                    <img t-if="img_url" t-att-src="img_url" class="card-img mx-auto w-50 pt-3" t-att-alt="title" />
                    <div class=" px-2 py-3 d-flex flex-column">
                        <h6 class="font-weight-bold m-0 card-title flex-fill"><t t-esc="title"/></h6>
                        <t t-if='count'>
                            <span class="h2 font-weight-bold m-0 mt-3" t-esc="count"/>
                        </t>
                        <t t-elif="placeholder_count">
                            <span class="h2 font-weight-bold m-0 mt-3" t-att-data-placeholder_count="placeholder_count">
                                <i class="fa fa-spin fa-circle-o-notch"></i>
                            </span>
                        </t>
                    </div>
                </a>
            </div>
        </xpath>
    </template>
</odoo>
