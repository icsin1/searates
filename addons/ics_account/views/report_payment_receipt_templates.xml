<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="inherit_report_payment_receipt_document" inherit_id="account.report_payment_receipt_document">
        <xpath expr="//tbody" position="inside">
            <t t-foreach="o.opening_invoice_bill_ids" t-as="op_move">
                <t t-if="op_move.move_type == 'entry'">
                    <t t-set="opening_move_balance" t-value="o.get_opening_moves_total(op_move)"/>
                    <!-- Opening Balance MOVE -->
                    <tr>
                        <td><span t-field="op_move.date"/></td>
                        <td><span t-field="op_move.name"/></td>
                        <td><span t-field="op_move.ref"/></td>
                        <td t-if="otherCurrency"/>
                        <td class="text-right">
                            <span t-esc="opening_move_balance['opening_move_total']" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                        </td>
                    </tr>
                    <!-- Opening Balance PAYMENTS/REVERSALS -->
                    <tr t-foreach="op_move.get_opening_balance_reconciled_lines(o)" t-as="par">
                        <t t-set="payment" t-value="par[2].move_id"/>
                        <td><span t-field="payment.date"/></td>
                        <td><span t-field="payment.name"/></td>
                        <td><span t-field="payment.ref"/></td>
                        <t t-set="amountPayment" t-value="-payment.amount_total"/>
                        <t t-set="amountInvoice" t-value="-par[1]"/>
                        <t t-set="currencyPayment" t-value="payment.currency_id"/>
                        <t t-set="currencyInvoice" t-value="op_move.currency_id"/>
                        <td t-if="otherCurrency" class="text-right"><span t-if="currencyPayment != currencyInvoice" t-esc="amountPayment" t-options="{'widget': 'monetary', 'display_currency': currencyPayment}"/></td>
                        <td class="text-right"><span t-esc="amountInvoice" t-options="{'widget': 'monetary', 'display_currency': currencyInvoice}"/></td>
                    </tr>
                    <!-- Opening BALANCE DUE-->
                    <tr>
                        <td/>
                        <td><strong>Due Amount for <span t-field="op_move.name"/></strong></td>
                        <td/>
                        <td t-if="otherCurrency"/>
                        <td class="text-right">
                            <strong><span t-esc="opening_move_balance['opening_move_total_due']" t-options="{'widget': 'monetary', 'display_currency': currencyPayment}"/></strong>
                        </td>
                    </tr>
                </t>
            </t>
        </xpath>
    </template>

</odoo>
