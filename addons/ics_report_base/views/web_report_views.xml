<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="web_report_view_tree" model="ir.ui.view">
        <field name="name">web.report.view.tree</field>
        <field name="model">web.report</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" />
                <field name="model_id" />
                <field name="active" />
            </tree>
        </field>
    </record>

    <record id="web_report_view_form" model="ir.ui.view">
        <field name="name">web.report.view.form</field>
        <field name="model">web.report</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="alert alert-info" role="alert" attrs="{'invisible': [('report_handler_model_id', '=', False)]}">
                        Report is handeled by Custom Handler
                    </div>
                    <label for="name"/>
                    <div class="oe_title">
                        <h1><field name="name" /></h1>
                    </div>
                    <group>
                        <group>
                            <field name="model_id" options="{'no_create': 1}"/>
                        </group>
                        <group>
                            <field name="active" />
                        </group>
                    </group>
                    <group string="Data Match">
                        <field name="model_name" invisible="1"/>
                        <field name="data_match_domain" widget="domain" options="{'model': 'model_name', 'in_dialog': True}"/>
                    </group>
                    <notebook>
                        <page name="sections" string="Sections">
                            <field name="line_ids" />
                        </page>
                        <page name="columns" string="Columns">
                            <field name="column_ids">
                                <tree editable="bottom">
                                    <field name="sequence" widget="handle"/>
                                    <field name="name" />
                                    <field name="expression_label" />
                                    <field name="value_type" />
                                    <field name="sortable"/>
                                    <field name="hide_if_zero" />
                                </tree>
                            </field>
                        </page>
                        <page name="filters" string="Filters">
                            <field name="filter_ids">
                                <tree>
                                    <field name="sequence" widget="handle"/>
                                    <field name="name" />
                                    <field name="filter_type" />
                                    <field name="model_id" force_save="1" attrs="{'invisible': [('filter_type', 'not in', ['single_relation', 'multi_relation'])]}"/>
                                    <field name="ir_model_field_id" options="{'no_create': 1}" attrs="{'invisible': [('filter_type', 'not in', ['single_relation', 'multi_relation'])], 'required': [('filter_type', 'in', ['single_relation', 'multi_relation'])]}"/>
                                </tree>
                            </field>
                        </page>
                        <page name="settings" string="Settings">
                            <group>
                                <group>
                                    <field name="filter_multi_company" />
                                    <field name="filter_comparison" />
                                    <field name="filter_unfold_all" />
                                </group>
                                <group>
                                    <field name="filter_date_type" />
                                    <field name="default_opening_date" attrs="{'invisible': [('filter_date_type', '=', 'disabled')], 'required': [('filter_date_type', '!=', 'disabled')]}"/>
                                    <field name="date_field" attrs="{'invisible': [('filter_date_type', '=', 'disabled')], 'required': [('filter_date_type', '!=', 'disabled')]}" options="{'no_create': 1}"/>
                                </group>
                            </group>
                            <group groups="base.group_no_one">
                                <group string="Handler">
                                    <field name="report_handler_model_id" string="Handler"/>
                                    <field name="enable_report_handler_code" string="Add Custom Code"/>
                                </group>
                                <group string="Output Reports">
                                    <field name="enable_custom_report_export" string="Custom Reports?"/>
                                </group>
                            </group>
                        </page>
                        <page name="handler_code" string="Expression Code" attrs="{'invisible': [('enable_report_handler_code', '=', False)]}">
                            <field name="report_handler_python_code" widget="ace" options="{'mode': 'python'}"/>
                        </page>
                        <page name="custom_reports" string="Custom Reports" attrs="{'invisible': [('enable_custom_report_export', '=', False)]}">
                            
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="web_report_filter_view_form" model="ir.ui.view">
        <field name="name">web.report.filter.view.form</field>
        <field name="model">web.report.filter</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <label for="name"/>
                    <div class="oe_title">
                        <h1><field name="name" /></h1>
                    </div>
                    <group>
                        <group>
                            <field name="model_id" invisible="1" force_save="1"/>
                            <field name="field_model_name" invisible="1"/>
                            <field name="filter_type" />
                            <field name="ir_model_field_id" options="{'no_create': 1, 'no_open': 1}" attrs="{'required': [('filter_type', 'in', ['single_relation', 'multi_relation'])], 'invisible': [('filter_type', 'not in', ['single_relation', 'multi_relation'])]}"/>
                        </group>
                        <group>
                            <field name="filter_key" />
                            <field name="icon" groups="base.group_no_one"/>
                            <field name="default_value" attrs="{'invisible': [('filter_type', '!=', 'input')], 'required': [('filter_type', '=', 'input')]}"/>
                        </group>
                    </group>
                    <group string="Data Domain" attrs="{'invisible': [('field_model_name', '=', False)]}">
                        <field name="data_domain" attrs="{'invisible': [('field_model_name', '=', False)]}" nolabel="1" widget="domain" options="{'model': 'field_model_name', 'in_dialog': True}"/>
                    </group>
                    <group string="Choices" attrs="{'invisible': [('filter_type', 'not in', ['choice', 'choice_multi'])]}">
                        <field name="choice_ids" nolabel="1">
                            <tree editable="bottom">
                                <field name="sequence" widget="handle"/>
                                <field name="name" />
                                <field name="choice_key" />
                                <field name="is_default" widget="boolean_toggle"/>
                            </tree>
                        </field>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="web_report_action" model="ir.actions.act_window">
        <field name="name">Web Report</field>
        <field name="res_model">web.report</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[]</field>
        <field name="context">{}</field>
    </record>

    <menuitem
        id="web_report_root_menu"
        name="Web Reports"
        groups="base.group_system"
        parent="base.menu_custom"
        sequence="10"/>
    
    <menuitem
        id="web_report_menu"
        name="Reports"
        action="web_report_action"
        parent="web_report_root_menu"
        sequence="0"/>
<!-- 
    <record id="action_operation_new_reports_shipping_lines" model="ir.actions.client">
        <field name="name">Sales Report by Customer</field>
        <field name="tag">ics_report_base.web_report</field>
        <field name="context" eval="{'report_id': 5}"/>
        <field name="res_model">web.report</field>
    </record>

    <menuitem
        id="menu_operation_report_shipping_lines"
        name="Sales Report by Customer (NEW)"
        parent="fm_operation_reports.menu_freight_operation_reporting"
        action="action_operation_new_reports_shipping_lines"
        sequence="2"
    /> -->
</odoo>
