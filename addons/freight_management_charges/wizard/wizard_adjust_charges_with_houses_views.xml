<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_wizard_adjust_charges_with_houses_form" model="ir.ui.view">
        <field name="name">wizard.adjust.charge.with.house.form</field>
        <field name="model">wizard.adjust.charge.with.house</field>
        <field name="arch" type="xml">
            <form class="py-0">
                <group string="Charges to Adjust">
                    <field name="master_shipment_id" invisible="1"/>
                    <field name="house_shipment_ids" invisible="1"/>
                    <field name="cargo_is_package_group" invisible="1"/>
                    <p colspan="2" class="text-info">Remove charges if you do not required to adjust</p>
                    <field name="revenue_charge_ids" colspan="2" attrs="{'invisible': [('revenue_charge_ids', '=', [])]}" nolabel="1" domain="[('master_shipment_id', '=', master_shipment_id), ('status', '!=', 'adjusted')]" context="{'default_master_shipment_id': master_shipment_id, 'make_invisible': 1}">
                        <tree editable="bottom">
                            <field name="charge_description" />
                            <field name="quantity"/>
                            <field name="company_id" invisible="1" />
                            <field name="product_id" />
                            <field name="amount_currency_id" invisible="1"/>
                            <field name="currency_id" invisible="1"/>
                            <field name="total_amount" sum="Total"/>
                        </tree>
                    </field>
                    <field name="cost_charge_ids" colspan="2" attrs="{'invisible': [('cost_charge_ids', '=', [])]}" nolabel="1" domain="[('master_shipment_id', '=', master_shipment_id), ('status', '=', 'no')]" context="{'default_master_shipment_id': master_shipment_id, 'make_invisible': 1}">
                        <tree editable="bottom">
                            <field name="charge_description" />
                            <field name="quantity"/>
                            <field name="company_id" invisible="1" />
                            <field name="product_id" />
                            <field name="amount_currency_id" invisible="1"/>
                            <field name="currency_id" invisible="1"/>
                            <field name="total_amount" sum="Total"/>
                        </tree>
                    </field>
                </group>
                <group string="Adjustment with House Shipments">
                    <p colspan="2" class="text-info font-weight-bold">House Values is calculated based on Measurement basis <field name="measurement_basis_id" readonly="1" options="{'no_open': 1}"/>
                        <span attrs="{'invisible': [('measure_container_type_id', '=', False)]}"> for <field name="measure_container_type_id" readonly="1" options="{'no_open': 1}"/></span>
                    </p>
                    <field name="line_ids" nolabel="1">
                        <tree editable="bottom" create="0">
                            <field name="shipment_id" readonly="1" force_save="1"/>
                            <field name="ratio_value" />
                            <field name="adjustment_ratio" class="font-weight-bold text-info" />
                            <field name="currency_id" invisible="1"/>
                            <field name="adjusted_amount" sum="Total" class="font-weight-bold"/>
                        </tree>
                    </field>
                </group>
                <footer>
                    <button type="object" string="Adjust Charges" name="action_adjust_charges" class="btn btn-primary"/>
                    <button type="special" special="cancel" string="Cancel" class="btn btn-default"/>
                </footer>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="wizard_adjust_charges_with_houses_wizard_action">
        <field name="name">Adjust Charges with House Shipments</field>
        <field name="res_model">wizard.adjust.charge.with.house</field>
        <field name="view_mode">form</field>
        <field name="context">{}</field>
        <field name="target">new</field>
    </record>
</odoo>
